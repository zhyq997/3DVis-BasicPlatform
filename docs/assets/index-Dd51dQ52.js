var r=(a,e,l)=>new Promise((g,m)=>{var u=i=>{try{_(l.next(i))}catch(p){m(p)}},y=i=>{try{_(l.throw(i))}catch(p){m(p)}},_=i=>i.done?g(i.value):Promise.resolve(i.value).then(u,y);_((l=l.apply(a,e)).next())});import{m as d,_ as D}from"./entry/index-BNp4bmLj-1732066199007.js";import{u as F}from"./use-lifecycle-CyVQVRUS.js";import{d as R,f as I,a7 as h,Z as W,a8 as Z,a9 as t,$ as b,k as o,G as s}from"./vue-D4H2Ux2Y.js";import"./antd-DgCI0x_J.js";let f,n;function q(a){f=a,d.DrawUtil.setAllEditPointStyle({pixelSize:14}),n=new d.thing.Measure({label:{color:"rgba(255, 0, 0, 1)",font_family:"楷体",font_size:20,background:!1},isAutoEditing:!1}),f.addThing(n),n.on(d.EventType.start,function(e){showLoading()}),n.on(d.EventType.end,function(e){hideLoading()})}function K(){f=null,v()}function x(a){f.onlyVertexPosition=a}function v(){n.clear()}function S(){return r(this,null,function*(){yield n.distance({showAddText:!0,label:{type:"div",updateText:function(a,e){e.html=`<div class="marsGreenGradientPnl" style="color:rgb(255,255,255)">${a}</div>`},html:'<div class="marsGreenGradientPnl" ></div>',horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM}})})}function T(){return r(this,null,function*(){yield n.distanceSurface({showAddText:!0,exact:!1})})}function O(){return r(this,null,function*(){const a=yield n.area({});if(f.scene.mode===Cesium.SceneMode.SCENE3D){const e=a.positionsShow,l=yield d.PolyUtil.getHeightRangeByDepth(e,f.scene);a.positions=d.PointUtil.setPositionsHeight(e,l.maxHeight)}})}function L(){return r(this,null,function*(){yield n.areaSurface({style:{color:"#ffff00"},splitNum:10,exact:!1})})}function N(){return r(this,null,function*(){yield n.height()})}function A(){return r(this,null,function*(){yield n.heightTriangle()})}function P(){return r(this,null,function*(){yield n.angle()})}function j(){return r(this,null,function*(){yield n.point({})})}function J(a){const e=a.name,l=e==null?void 0:e.substring(e.lastIndexOf(".")+1,e.length).toLowerCase();if(l==="json"){const g=new FileReader;g.readAsText(a,"UTF-8"),g.onloadend=function(m){const u=JSON.parse(this.result);u.type==="graphic"&&u.data?(n.graphicLayer.addGraphic(u.data),n.graphicLayer.flyTo()):n.graphicLayer.loadGeoJSON(u,{flyTo:!0})}}else globalMsg("暂不支持 "+l+" 文件类型的数据！")}function $(){if(n.graphicLayer.length===0){globalMsg("当前没有标注任何数据，无需保存！");return}const a=n.graphicLayer.toJSON();d.Util.downloadFile("测量结果.json",JSON.stringify(a))}const Q=Object.freeze(Object.defineProperty({__proto__:null,get map(){return f},measureAngle:P,measureArea:O,measureHeight:N,measureLength:S,measurePoint:j,measureSurfaceLength:T,measureSurfaceeArea:L,measureTriangleHeight:A,onMounted:q,onUnmounted:K,onlyVertexPosition:x,openJSON:J,removeAll:v,saveJSON:$},Symbol.toStringTag,{value:"Module"})),X={class:"f-mb"},Y={class:"f-mb"},ee={class:"f-mb"},ne=R({__name:"index",setup(a){F(Q);const e=I(!1),l=()=>{S()},g=()=>{O()},m=()=>{N()},u=()=>{j()},y=()=>{T()},_=()=>{L()},i=()=>{A()},p=()=>{P()},E=()=>{x(e.value)},G=()=>{v()},U=C=>{J(C.file)},H=()=>{$()};return(C,w)=>{const c=h("mars-button"),k=h("a-space"),M=h("a-upload"),V=h("a-checkbox"),z=h("mars-dialog");return W(),Z(z,{visible:!0,right:"10",top:"60",width:"330"},{default:t(()=>[b("div",X,[o(k,null,{default:t(()=>[o(c,{class:"btn",onClick:l},{default:t(()=>[s("空间距离")]),_:1}),o(c,{class:"btn",onClick:g},{default:t(()=>[s("水平面积")]),_:1}),o(c,{class:"btn",onClick:m},{default:t(()=>[s("高度差")]),_:1}),o(c,{class:"btn",onClick:u},{default:t(()=>[s("坐标测量")]),_:1})]),_:1})]),b("div",Y,[o(k,null,{default:t(()=>[o(c,{class:"btn",onClick:y},{default:t(()=>[s("贴地距离")]),_:1}),o(c,{class:"btn",onClick:_},{default:t(()=>[s("贴地面积")]),_:1}),o(c,{class:"btn",onClick:i},{default:t(()=>[s("三角测量")]),_:1}),o(c,{class:"btn",onClick:p},{default:t(()=>[s("方位角")]),_:1})]),_:1})]),b("div",ee,[o(k,null,{default:t(()=>[o(c,{class:"control_btn",onClick:H},{default:t(()=>[s("保存Json")]),_:1}),o(M,{multiple:!1,name:"file",accept:"json,geojson",showUploadList:!1,onChange:U,beforeUpload:()=>!1},{default:t(()=>[o(c,{class:"control_btn"},{default:t(()=>[s(" 打开Json ")]),_:1})]),_:1}),o(c,{class:"control_btn",danger:"",onClick:G},{default:t(()=>[s("清除")]),_:1})]),_:1})]),b("div",null,[o(V,{onChange:E,checked:e.value,"onUpdate:checked":w[0]||(w[0]=B=>e.value=B)},{default:t(()=>[s("开启顶点吸附")]),_:1},8,["checked"])])]),_:1})}}}),ce=D(ne,[["__scopeId","data-v-1b2b780d"]]);export{ce as default};
