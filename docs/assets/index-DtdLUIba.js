import{m as r,C as L,L as z,_ as N}from"./entry/index-BNp4bmLj-1732066199007.js";import{u as V}from"./use-lifecycle-CyVQVRUS.js";import{d as $,f as P,o as I,y as w,a7 as y,Z as D,a8 as G,a9 as f,k as d,G as C,a2 as U,a3 as j,$ as S}from"./vue-D4H2Ux2Y.js";import"./antd-DgCI0x_J.js";let m,u;const A={scene:{center:{lat:30.715648,lng:116.300527,alt:10727,heading:3,pitch:-25}}},p=new r.BaseClass;function Z(o){m=o,u=new r.thing.Measure({label:{color:"#ffffff",font_family:"楷体",font_size:20}}),m.addThing(u),u.on(r.EventType.start,function(t){}),u.on(r.EventType.end,function(t){var n;((n=t.graphic)==null?void 0:n.type)===r.graphic.SectionMeasure.type&&p.fire("measureEnd",t)}),u.on(r.EventType.click,function(t){var n,c;g(),((n=t.graphic)==null?void 0:n.type)===r.graphic.SectionMeasure.type&&p.fire("measureClick",{value:(c=t.graphic)==null?void 0:c.measured})})}function H(){m=null}function T(){u.clear(),g()}function k(){u.section({splitNum:300,exact:!1})}function M(o){const t=r.MeasureUtil.formatDistance(Number(o.axisValue)),n=r.MeasureUtil.formatDistance(Number(o.value));return{len:t,hbgdStr:n}}let s;function E(o,t,n){const c=Cesium.Cartesian3.fromDegrees(o.lng,o.lat,t);s||(s=new r.graphic.BillboardEntity({name:"当前点",position:c,style:{image:"img/marker/mark-blue.png",scale:1,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,scaleByDistance:new Cesium.NearFarScalar(1e4,1,5e5,.2)}}).addTo(m.graphicLayer),s._setPositionsToCallback()),s._position_draw=c,s.bindPopup(n).openPopup()}function g(){s&&(s.remove(!0),s=null)}const F=Object.freeze(Object.defineProperty({__proto__:null,calculation:M,eventTarget:p,hideTipMarker:g,get map(){return m},mapOptions:A,measureSection:k,onMounted:Z,onUnmounted:H,removeAll:T,showTipMarker:E},Symbol.toStringTag,{value:"Module"})),R=o=>(U("data-v-138f2c2d"),o=o(),j(),o),W=R(()=>S("div",{class:"echatsView"},[S("div",{id:"echartsView1",style:{width:"100%",height:"100%"}})],-1)),q=$({__name:"index",setup(o){V(F);const t=P(!1);let n;window.onresize=function(){n.resize()},I(()=>{n=L(document.getElementById("echartsView1"))}),p.on("measureEnd",function(e){t.value=!0,w(()=>{v(e)})}),p.on("measureClick",function(e){e.value&&w(()=>{v(e.value)})});const c=()=>{k()},O=()=>{T(),t.value=!1,n.clear()};function v(e){if(e==null||e.arrPoint==null)return;const i=e.arrPoint;let a="";const h={grid:{left:10,right:40,bottom:10,top:40,containLabel:!0},dataZoom:[{type:"inside",throttle:50}],tooltip:{trigger:"axis",formatter:l=>{if(l.length===0)return g(),a;const _=l[0].value,b=i[l[0].dataIndex],x=M(l[0]);return a=`当前位置<br />
                      距起点：${x.len}<br />
                      海拔：<span style='color:${l[0].color};'>${x.hbgdStr}</span><br />
                      经度：${b.lng}<br />
                      纬度：${b.lat}`,E(b,_,a),a}},xAxis:[{name:"行程",type:"category",nameTextStyle:{color:"rgb(255, 70, 131)"},boundaryGap:!1,axisLine:{show:!0},axisLabel:{show:!0,formatter:"{value} 米",color:"#000"},data:e.arrLen}],yAxis:[{name:"高程",nameTextStyle:{color:"rgb(255, 70, 131)"},type:"value",min:B(i),axisLabel:{formatter:"{value} 米",color:"#000"}}],series:[{name:"高程值",type:"line",smooth:!0,symbol:"none",sampling:"average",itemStyle:{normal:{color:"rgb(255, 70, 131)"}},areaStyle:{normal:{color:new z(0,0,0,1,[{offset:0,color:"rgb(255, 158, 68)"},{offset:1,color:"rgb(255, 70, 131)"}])}},data:e.arrHB}]};n.setOption(h),n.resize()}function B(e){let i="dataMin";if(e==null||e.length===0)return i;i=e[0].alt;for(let a=0;a<e.length;a++)e[a].alt<i&&(i=e[a].alt);return i}return(e,i)=>{const a=y("mars-button"),h=y("a-space"),l=y("mars-dialog");return D(),G(l,{visible:!0,right:"10",top:"60",width:"330",title:"剖面分析"},{default:f(()=>[d(h,null,{default:f(()=>[d(a,{class:"btn",onClick:c},{default:f(()=>[C("绘制线")]),_:1}),d(a,{class:"btn",danger:"",onClick:O},{default:f(()=>[C("清除")]),_:1})]),_:1}),d(l,{visible:t.value,"onUpdate:visible":i[0]||(i[0]=_=>t.value=_),left:70,right:240,bottom:40},{default:f(()=>[W]),_:1},8,["visible"])]),_:1})}}}),Y=N(q,[["__scopeId","data-v-138f2c2d"]]);export{Y as default};
