var D=(e,a,i)=>new Promise((c,y)=>{var S=u=>{try{g(i.next(u))}catch(v){y(v)}},L=u=>{try{g(i.throw(u))}catch(v){y(v)}},g=u=>u.done?c(u.value):Promise.resolve(u.value).then(S,L);g((i=i.apply(e,a)).next())});import{m as f,_ as re}from"./entry/index-BNp4bmLj-1732066199007.js";import{u as se}from"./use-lifecycle-CyVQVRUS.js";import{d as ce,r as de,f as O,a7 as d,Z as T,a8 as G,a9 as n,$ as k,k as t,G as m,_ as ue,F as pe,a0 as fe,a2 as me,a3 as he}from"./vue-D4H2Ux2Y.js";import"./antd-DgCI0x_J.js";let l,h,o;const ye={scene:{center:{lat:34.215539,lng:108.959582,alt:817,heading:2,pitch:-46}}},I=new f.BaseClass;function _e(e){l=e,l.fixedLight=!0,h=new f.layer.GraphicLayer,l.addLayer(h),B()}function ge(){o&&l.removeLayer(o,!0),l.graphicLayer.clear(),h.clear(),l=null,o=null}const A=!1;function B(){H(),o=new f.layer.TilesetLayer({name:"大雁塔",url:"//data.mars3d.cn/3dtiles/qx-dyt/tileset.json",position:{alt:-27},maximumScreenSpaceError:1,flat:{precise:A,area:[{positions:[[108.959054,34.219449,405],[108.959821,34.219449,405],[108.959821,34.220165,405],[108.959054,34.220165,405]]}],editHeight:-24,enabled:!0},flyTo:!0}),l.addLayer(o),o.flat.on(f.EventType.addItem,E)}function j(){H(),o=new f.layer.TilesetLayer({name:"合肥天鹅湖",url:"//data.mars3d.cn/3dtiles/qx-teh/tileset.json",position:{lng:117.218434,lat:31.81807,alt:163},maximumScreenSpaceError:16,cacheBytes:1073741824,maximumCacheOverflowBytes:2147483648,cullWithChildrenBounds:!1,skipLevelOfDetail:!0,preferLeaves:!0,center:{lat:31.795308,lng:117.21948,alt:1820,heading:0,pitch:-39},editHeight:-140,flat:{precise:A,enabled:!0},flyTo:!0}),l.addLayer(o),o.flat.on(f.EventType.addItem,E)}function z(){H(),o=new f.layer.TilesetLayer({name:"县城社区",url:"//data.mars3d.cn/3dtiles/qx-shequ/tileset.json",position:{alt:148.2},maximumScreenSpaceError:1,skipLevelOfDetail:!0,preferLeaves:!0,cullWithChildrenBounds:!1,center:{lat:28.440675,lng:119.487735,alt:639,heading:269,pitch:-38},editHeight:-18,flat:{precise:A,enabled:!0},flyTo:!0}),l.addLayer(o),o.flat.on(f.EventType.addItem,E)}function E(e){const a=e.area;a.lineId=ve(a.positions),I.fire("addItem",e)}function H(){o&&l.removeLayer(o,!0)}function F(e){return D(this,null,function*(){l.graphicLayer.clear();const i=(yield l.graphicLayer.startDraw({type:"rectangle",style:{color:"#007be6",opacity:.2,outline:!1}})).getOutlinePositions(!1);l.graphicLayer.clear(),o.flat.addArea(i,{height:e})})}function J(e){return D(this,null,function*(){l.graphicLayer.clear();const i=(yield l.graphicLayer.startDraw({type:"polygon",style:{color:"#007be6",opacity:.5}})).positionsShow;l.graphicLayer.clear(),o.flat.addArea(i,{height:e})})}function X(){o.flat.clear(),l.graphicLayer.clear(),h.clear()}function N(e){o.flat.updateHeight(e)}function q(e){h.show=e}function P(e,a){a?o.flat.showArea(e):o.flat.hideArea(e)}function U(e){const a=o.flat.getAreaById(e);l.flyToPositions(a.positions)}function V(e,a){o.flat.removeArea(e);const i=h.getGraphicById(a);h.removeGraphic(i)}function ve(e){const a=new f.graphic.PolylineEntity({positions:e,style:{closure:!0,color:"#ffffff",opacity:.8,width:2,clampToGround:!0}});return h.addGraphic(a),a.id}const we=Object.freeze(Object.defineProperty({__proto__:null,btnDraw:J,btnDrawExtent:F,changeFlatHeight:N,chkShowLine:q,deletedGraphic:V,eventTarget:I,flyToGraphic:U,get map(){return l},mapOptions:ye,onMounted:_e,onUnmounted:ge,removeAll:X,showDytDemo:B,showHideArea:P,showTehDemo:j,showXianDemo:z},Symbol.toStringTag,{value:"Module"})),b=e=>(me("data-v-02fc419d"),e=e(),he(),e),ke=b(()=>k("span",{class:"mars-pannel-item-label"},"模型:",-1)),Le=b(()=>k("span",{class:"mars-pannel-item-label"},"开挖区域:",-1)),be=b(()=>k("span",{class:"mars-pannel-item-label"},"压平区高度:",-1)),Se=b(()=>k("p",null,"（米）",-1)),xe=ce({__name:"index",setup(e){se(we);const a=de({enabledBianJieXian:!0,flatHeight:0}),i=[{title:"压平区域",dataIndex:"name",key:"name",align:"center"},{title:"操作",dataIndex:"caozuo",key:"caozuo",width:100,align:"center"}],c=O([]),y=O([]),S={hideSelectAll:!0,hideDefaultSelections:!0,selectedRowKeys:y,onChange:r=>{y.value=r},onSelect:(r,s)=>{P(r.key,s)}};let L=0;I.on("addItem",function(r){const s=r.area;c.value.push({key:s.id,name:"压平区"+ ++L,lineId:s.lineId}),y.value.push(s.id)});const g=r=>{U(r.key)},u=r=>{V(r.key,r.lineId),c.value=c.value.filter(s=>s.key!==r.key)},v=()=>{q(a.enabledBianJieXian)},W=()=>{c.value=[],B()},K=()=>{c.value=[],j()},M=()=>{c.value=[],z()},R=()=>{F(a.flatHeight)},Z=()=>{J(a.flatHeight)},Q=()=>{L=0,X(),c.value=[]},Y=()=>{N(a.flatHeight)};return(r,s)=>{const p=d("a-col"),_=d("mars-button"),x=d("a-space"),ee=d("mars-input-number"),ae=d("a-checkbox"),te=d("a-form-item"),$=d("mars-icon"),ne=d("mars-table"),oe=d("a-row"),le=d("mars-dialog");return T(),G(le,{visible:!0,right:"10",top:"60",width:"380",title:"模型压平"},{default:n(()=>[k("div",null,[t(oe,{gutter:[5,10]},{default:n(()=>[t(p,{span:6},{default:n(()=>[ke]),_:1}),t(p,{span:18},{default:n(()=>[t(x,null,{default:n(()=>[t(_,{onClick:W},{default:n(()=>[m("大雁塔")]),_:1}),t(_,{onClick:K},{default:n(()=>[m("天鹅湖")]),_:1}),t(_,{onClick:M},{default:n(()=>[m("县城")]),_:1})]),_:1})]),_:1}),t(p,{span:6},{default:n(()=>[Le]),_:1}),t(p,{span:18},{default:n(()=>[t(x,null,{default:n(()=>[t(_,{onClick:R},{default:n(()=>[m("绘制矩形")]),_:1}),t(_,{onClick:Z},{default:n(()=>[m("绘制多边行")]),_:1}),t(_,{onClick:Q,danger:""},{default:n(()=>[m("清除")]),_:1})]),_:1})]),_:1}),t(p,{span:6},{default:n(()=>[be]),_:1}),t(p,{span:10},{default:n(()=>[t(ee,{value:a.flatHeight,"onUpdate:value":s[0]||(s[0]=w=>a.flatHeight=w),onChange:Y,step:.1},null,8,["value"])]),_:1}),t(p,{span:8,class:"miFont"},{default:n(()=>[Se]),_:1}),t(p,{span:21},{default:n(()=>[t(te,null,{default:n(()=>[t(ae,{checked:a.enabledBianJieXian,"onUpdate:checked":s[1]||(s[1]=w=>a.enabledBianJieXian=w),onChange:v},{default:n(()=>[m(" 显示测试边界线 ")]),_:1},8,["checked"])]),_:1})]),_:1}),t(p,{span:24},{default:n(()=>[t(ne,{pagination:{pageSize:5},"row-selection":S,dataSource:c.value,columns:i,size:"small",bordered:""},{bodyCell:n(({column:w,record:C})=>[w.key==="caozuo"?(T(),G(x,{key:0},{default:n(()=>[t($,{icon:"move-one",class:"icon-vertical-a",onClick:ie=>g(C)},null,8,["onClick"]),t($,{icon:"delete",class:"icon-vertical-a",onClick:ie=>u(C)},null,8,["onClick"])]),_:2},1024)):(T(),ue(pe,{key:1},[m(fe(C.name),1)],64))]),_:1},8,["dataSource"])]),_:1})]),_:1})])]),_:1})}}}),Be=re(xe,[["__scopeId","data-v-02fc419d"]]);export{Be as default};
