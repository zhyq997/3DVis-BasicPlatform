var x=(e,o,a)=>new Promise((g,d)=>{var h=n=>{try{p(a.next(n))}catch(i){d(i)}},_=n=>{try{p(a.throw(n))}catch(i){d(i)}},p=n=>n.done?g(n.value):Promise.resolve(n.value).then(h,_);p((a=a.apply(e,o)).next())});import{m as C,h as E,i as I,_ as N}from"./entry/index-BNp4bmLj-1732066199007.js";import{u as P}from"./use-lifecycle-CyVQVRUS.js";import{d as V,f as H,a7 as f,Z as j,a8 as A,a9 as r,$ as c,k as s,G as u,a0 as k,a2 as G,a3 as U}from"./vue-D4H2Ux2Y.js";import"./antd-DgCI0x_J.js";let t,l,m;const M={scene:{center:{lat:31.794547,lng:117.21215,alt:1672,heading:18,pitch:-33}}};function W(e){t=e,t.fixedLight=!0,m=new C.layer.TilesetLayer({pid:-1,flyTo:!0,name:"合肥天鹅湖",type:"3dtiles",url:"//data.mars3d.cn/3dtiles/qx-teh/tileset.json",position:{lng:117.218434,lat:31.81807,alt:163},maximumScreenSpaceError:16,cacheBytes:1073741824,maximumCacheOverflowBytes:2147483648,cullWithChildrenBounds:!1,skipLevelOfDetail:!0,preferLeaves:!0}),t.addLayer(m),l=new C.thing.LimitHeight({color:"rgba(255,0,0,0.5)",height:80,bottomHeight:32}),t.addThing(l)}function q(){m&&t.removeLayer(m,!0),w(),t=null}function $(e){l.height=e}function O(e){l.diffHeight=e}function T(){return x(this,null,function*(){t.graphicLayer.clear();const e=yield t.graphicLayer.startDraw({type:"rectangle",style:{color:"#ffff00",opacity:.3,clampToGround:!0}});E(),t.graphicLayer.autoSurfaceHeight({endItem:function(a){a.index+1,a.count}}).then(()=>{I()});const o=e.getOutlinePositions(!1);l.positions=o,t.graphicLayer.clear()})}function B(){return x(this,null,function*(){t.graphicLayer.clear();const o=(yield t.graphicLayer.startDraw({type:"polygon",style:{color:"#ffff00",opacity:.3,clampToGround:!0}})).positionsShow;l.positions=o,t.graphicLayer.clear()})}function w(){l.clear(),t.graphicLayer.clear()}const z=Object.freeze(Object.defineProperty({__proto__:null,clear:w,currHeight:$,drawExtent:T,drawPolygon:B,get map(){return t},mapOptions:M,onMounted:W,onUnmounted:q,setDiffHeight:O},Symbol.toStringTag,{value:"Module"})),b=e=>(G("data-v-a137d91a"),e=e(),U(),e),J={class:"f-mb"},Z=b(()=>c("span",null,"分析区域",-1)),F={class:"f-mb"},K=b(()=>c("span",null,"限定高度",-1)),Q={class:"f-mb"},R=b(()=>c("span",null,"高度差",-1)),X=V({__name:"index",setup(e){P(z);const o=H(80),a=H(1e3),g=()=>{$(o.value)},d=()=>{O(a.value)},h=()=>{T()},_=()=>{B()},p=()=>{w()};return(n,i)=>{const y=f("mars-button"),v=f("a-space"),S=f("mars-slider"),D=f("mars-dialog");return j(),A(D,{visible:!0,right:"10",top:"60",title:"限高分析",width:"330"},{default:r(()=>[c("div",J,[s(v,null,{default:r(()=>[Z,s(y,{onClick:h},{default:r(()=>[u("绘制矩形")]),_:1}),s(y,{onClick:_},{default:r(()=>[u("绘制面")]),_:1}),s(y,{onClick:p,danger:""},{default:r(()=>[u("清除")]),_:1})]),_:1})]),c("div",F,[s(v,null,{default:r(()=>[K,s(S,{onChange:g,value:o.value,"onUpdate:value":i[0]||(i[0]=L=>o.value=L),min:0,max:180},null,8,["value"]),u("高度"+k(o.value),1)]),_:1})]),c("div",Q,[s(v,null,{default:r(()=>[R,s(S,{onChange:d,value:a.value,"onUpdate:value":i[1]||(i[1]=L=>a.value=L),min:1,max:1e3},null,8,["value"]),u("高度"+k(a.value),1)]),_:1})])]),_:1})}}}),ne=N(X,[["__scopeId","data-v-a137d91a"]]);export{ne as default};
