var T=(e,i,c)=>new Promise((a,y)=>{var g=u=>{try{_(c.next(u))}catch(b){y(b)}},h=u=>{try{_(c.throw(u))}catch(b){y(b)}},_=u=>u.done?a(u.value):Promise.resolve(u.value).then(g,h);_((c=c.apply(e,i)).next())});import"./localforage-Asvql24k.js";import{m as U,_ as le}from"./entry/index-BNp4bmLj-1732066199007.js";import{u as ie}from"./use-lifecycle-CyVQVRUS.js";import{d as se,f,r as ce,o as re,a7 as r,Z as W,a8 as de,a9 as n,$ as B,k as t,G as m,_ as E,F as ue,a0 as pe}from"./vue-D4H2Ux2Y.js";import"./antd-DgCI0x_J.js";let d,l,H=0;const ge={scene:{center:{lat:30.827414,lng:116.378229,alt:16933,heading:0,pitch:-56}}},D=new U.BaseClass;function me(e){d=e}function fe(){H=0,L(),d=null}function j(e){l=new U.thing.TerrainClip({diffHeight:e,image:"img/textures/poly-stone.jpg",imageBottom:"img/textures/poly-soil.jpg",splitNum:80}),d.addThing(l)}function q(e){return T(this,null,function*(){const c=(yield d.graphicLayer.startDraw({type:"rectangle",style:{color:"#007be6",opacity:.8}})).getOutlinePositions(!1);d.graphicLayer.clear();const a=l.addArea(c);F(a)})}function N(e){return T(this,null,function*(){const c=(yield d.graphicLayer.startDraw({type:"polygon",style:{color:"#007be6",opacity:.5,outline:!1}})).positionsShow;d.graphicLayer.clear();const a=l.addArea(c);F(a)})}function L(){l.clear()}function z(e){l.diffHeight=e}function I(e){l.enabled=e}function $(e){l.clipOutSide=e}function P(e){d.scene.globe.depthTestAgainstTerrain=e}function F(e){H++,D.fire("tableObject",{tableItem:{key:e.id,name:"开挖区域"+H,show:e.show}})}function G(e){const i=l.getAreaById(e);d.flyToPositions(i.positions)}function M(e){const i=l.getAreaById(e);l.removeArea(i)}function R(e,i){i?l.showArea(e):l.hideArea(e)}const he=Object.freeze(Object.defineProperty({__proto__:null,addTerrainClip:j,btnDraw:N,btnDrawExtent:q,changeClipHeight:z,chkClippingPlanes:I,chkTestTerrain:P,chkUnionClippingRegions:$,deletedGraphic:M,eventTabel:D,flyToGraphic:G,get map(){return d},mapOptions:ge,onMounted:me,onUnmounted:fe,removeAll:L,showHideArea:R},Symbol.toStringTag,{value:"Module"})),_e={class:"draw-tools"},be={key:0,class:"table-tools"},ye=se({__name:"index",setup(e){ie(he);const i=f({span:6}),c=f("left"),a=ce({enabledWadi:!0,enabledWaiqiege:!1,enabledShendu:!0,txtHeight:50}),y=f([{title:"开挖区域",dataIndex:"name",key:"name",align:"center"},{title:"操作",dataIndex:"caozuo",key:"caozuo",width:80,align:"center"}]),g=f([]),h=f([]),_=f({hideSelectAll:!0,hideDefaultSelections:!0,selectedRowKeys:h,onChange:o=>{h.value=o},onSelect:(o,s)=>{R(o.key,s)}});re(()=>{j(a.txtHeight)}),D.on("tableObject",function(o){o.tableItem&&(g.value.push(o.tableItem),h.value.push(o.tableItem.key))});const u=o=>{G(o.key)},b=o=>{M(o.key),g.value=g.value.filter(s=>s.key!==o.key)},V=()=>{I(a.enabledWadi)},J=()=>{$(a.enabledWaiqiege)},K=()=>{P(a.enabledShendu)};function C(){a.enabledWadi=!0,I(a.enabledWadi),a.enabledWaiqiege=!1,$(a.enabledWaiqiege)}const Z=()=>{C(),q(a.enabledWadi)},Q=()=>{C(),N(a.enabledWadi)},X=()=>{C(),L(),g.value=[]},Y=()=>{z(a.txtHeight)};return(o,s)=>{const v=r("a-checkbox"),w=r("a-space"),x=r("a-form-item"),k=r("a-col"),ee=r("mars-input-number"),A=r("mars-button"),O=r("mars-icon"),ae=r("mars-table"),te=r("a-row"),ne=r("mars-dialog");return W(),de(ne,{right:"10",top:"60",width:"330"},{default:n(()=>[B("div",null,[t(te,{gutter:[1,10]},{default:n(()=>[t(k,{span:24},{default:n(()=>[t(x,null,{default:n(()=>[t(w,null,{default:n(()=>[t(v,{checked:a.enabledWadi,"onUpdate:checked":s[0]||(s[0]=p=>a.enabledWadi=p),onChange:V},{default:n(()=>[m(" 是否挖地 ")]),_:1},8,["checked"]),t(v,{checked:a.enabledWaiqiege,"onUpdate:checked":s[1]||(s[1]=p=>a.enabledWaiqiege=p),onChange:J},{default:n(()=>[m(" 是否外切割 ")]),_:1},8,["checked"]),t(v,{checked:a.enabledShendu,"onUpdate:checked":s[2]||(s[2]=p=>a.enabledShendu=p),onChange:K},{default:n(()=>[m(" 深度检测 ")]),_:1},8,["checked"])]),_:1})]),_:1})]),_:1}),t(k,{span:24},{default:n(()=>[t(x,{label:"开挖深度",labelCol:i.value,labelAlign:c.value},{default:n(()=>[t(ee,{value:a.txtHeight,"onUpdate:value":s[3]||(s[3]=p=>a.txtHeight=p),onChange:Y,step:1,min:-500,max:999},null,8,["value"])]),_:1},8,["labelCol","labelAlign"])]),_:1}),t(k,{span:24},{default:n(()=>[t(x,{labelCol:i.value,labelAlign:c.value},{default:n(()=>[B("div",_e,[t(w,null,{default:n(()=>[t(A,{onClick:Z},{default:n(()=>[m("添加矩形")]),_:1}),t(A,{onClick:Q},{default:n(()=>[m("添加多边形")]),_:1}),t(A,{type:"primary",danger:"",onClick:X},{default:n(()=>[m("清除")]),_:1})]),_:1})])]),_:1},8,["labelCol","labelAlign"])]),_:1}),t(k,{span:24},{default:n(()=>[t(ae,{class:"mars-noHeader-table",pagination:!1,"row-selection":_.value,dataSource:g.value,columns:y.value,size:"small",showHeader:!1,bordered:!1},{bodyCell:n(({column:p,record:S})=>[p.key==="caozuo"?(W(),E("div",be,[t(w,null,{default:n(()=>[t(O,{icon:"move-one",color:"#007FD9",class:"icon-vertical-a",onClick:oe=>u(S)},null,8,["onClick"]),t(O,{icon:"delete",color:"#F96868",class:"icon-vertical-a",onClick:oe=>b(S)},null,8,["onClick"])]),_:2},1024)])):(W(),E(ue,{key:1},[m(pe(S.name),1)],64))]),_:1},8,["row-selection","dataSource","columns"])]),_:1})]),_:1})])]),_:1})}}}),Se=le(ye,[["__scopeId","data-v-6115ecf3"]]);export{Se as default};
