import{u as $}from"./use-lifecycle-CyVQVRUS.js";import{m as a,_ as z}from"./entry/index-BNp4bmLj-1732066199007.js";import{d as B,f as K,o as L,r as O,a7 as p,Z as U,a8 as A,a9 as d,k as f,$ as P,G as F}from"./vue-D4H2Ux2Y.js";import"./antd-DgCI0x_J.js";let u;const v=new a.BaseClass;function X(l){u=l}function Y(){i&&(i.remove(),i=null),v.off(),u=null}function T(){const l=u.getCenter();return l.format(),{lng:l.lng,lat:l.lat,alt:l.alt}}function o(l,n){return a.Util.formatNum(l,n)}function s(l){return a.PointTrans.degree2dms(l)}function D(l,n,r){return r==="2"?a.PointTrans.proj4Trans([l,n],a.CRS.EPSG4326,a.CRS.CGCS2000_GK_Zone_6):a.PointTrans.proj4Trans([l,n],a.CRS.EPSG4326,a.CRS.CGCS2000_GK_Zone_3)}function b(l,n,r){return a.PointTrans.dms2degree(l,n,r)}function w(l,n,r){return r==="2"?a.PointTrans.proj4Trans([l,n],a.CRS.CGCS2000_GK_Zone_6,a.CRS.EPSG4326):a.PointTrans.proj4Trans([l,n],a.CRS.CGCS2000_GK_Zone_3,a.CRS.EPSG4326)}function R(){u.setCursor("crosshair"),u.once(a.EventType.click,function(l){u.setCursor("");const n=l.cartesian,r=a.LngLatPoint.fromCartesian(n);r.format(),v.fire("clickMap",{point:r}),_(!1,r.lng,r.lat,r.alt)})}let i;function _(l,n,r,h){const c=[n,r,h];i==null?(i=new a.graphic.PointEntity({position:c,style:{color:"#3388ff",pixelSize:10,outlineColor:"#ffffff",outlineWidth:2,visibleDepth:!1}}),u.graphicLayer.addGraphic(i)):i.position=c,l&&i.flyTo({radius:1e3})}const I=Object.freeze(Object.defineProperty({__proto__:null,bindMourseClick:R,defultPoint:T,eventTarget:v,marsDms2degree:b,marsPointTrans:s,marsProj4Trans:D,marsUtilFormtNum:o,marsZONEtoCRS:w,onMounted:X,onUnmounted:Y,updateMarker:_},Symbol.toStringTag,{value:"Module"})),W={class:"position-container"},q={class:"f-pt f-tac"},H=B({__name:"index",setup(l){$(I);const n=K();L(()=>{const e=T();k(e),m(e),g(e)});const r=[{type:"radio",field:"type",label:"类型",value:"1",data:[{label:"十进制",value:"1"},{label:"度分秒",value:"2"},{label:"平面坐标",value:"3"}]},{type:"input",field:"lng",label:"经度",value:"",show(e){return e.type==="1"},change(e,t){c(t)}},{type:"input",field:"lat",label:"纬度",value:"",show(e){return e.type==="1"},change(e,t){c(t)}},{type:"input",field:"alt",label:"高程",value:"",show(e){return e.type==="1"},change(e,t){c(t)}},{type:"inputGroup",field:"lngDMS",label:"经度",value:[0,0,0],units:["度","分","秒"],show(e){return e.type==="2"},change(e,t){S(t)}},{type:"inputGroup",field:"latDMS",label:"纬度",value:[0,0,0],units:["度","分","秒"],show(e){return e.type==="2"},change(e,t){S(t)}},{type:"input",field:"altDMS",label:"高程",value:"",show(e){return e.type==="2"},change(e,t){S(t)}},{type:"radio",field:"radioFendai",label:"分带",value:"1",data:[{label:"三度带",value:"1"},{label:"六度带",value:"2"}],change(e,t){h(t)},show(e){return e.type==="3"}},{type:"input",field:"gk6X",label:"纵坐标",value:"",show(e){return e.type==="3"},change(e,t){C(t)}},{type:"input",field:"gk6Y",label:"横坐标",value:"",show(e){return e.type==="3"},change(e,t){C(t)}},{type:"input",field:"gkAlt",label:"高度值",value:"",show(e){return e.type==="3"},change(e,t){C(t)}}],h=e=>{M(e),g(e)},c=e=>{m(e),g(e)},S=e=>{n.value.updateField("lng",b(o(e.lngDMS[0],6),o(e.lngDMS[1],6),o(e.lngDMS[2],6))),n.value.updateField("lat",b(o(e.latDMS[0],6),o(e.latDMS[1],6),o(e.latDMS[2],6))),n.value.updateField("alt",e.altDMS),g(e)},C=e=>{M(e),m(e)},E=()=>{R()};v.on("clickMap",e=>{const t=O({lng:e.point.lng,lat:e.point.lat,alt:e.point.alt});k(t),m(t),g(t),_(!1,t.lng,t.lat,t.alt)});const k=e=>{n.value.updateField("lng",o(e.lng,6)),n.value.updateField("lat",o(e.lat,6)),n.value.updateField("alt",o(e.alt,6))},M=e=>{const t=w(Number(e.gk6X),Number(e.gk6Y),e.radioFendai);n.value.updateField("lng",o(t[0],6)),n.value.updateField("lat",o(t[1],6)),n.value.updateField("alt",e.gkAlt)},g=e=>{const t=D(o(e.lng,6),o(e.lat,6),n.value.getValue("radioFendai"));n.value.updateField("gk6X",o(t[0],1)),n.value.updateField("gk6Y",o(t[1],1)),n.value.updateField("gkAlt",o(e.alt,6))},m=e=>{const t=[s(e.lng).degree,s(e.lng).minute,s(e.lng).second],y=[s(e.lat).degree,s(e.lat).minute,s(e.lat).second];n.value.updateField("lngDMS",t),n.value.updateField("latDMS",y),n.value.updateField("altDMS",o(e.alt,6))},x=()=>{const e=n.value.getValues();_(!0,e.lng,e.lat,e.alt)};return(e,t)=>{const y=p("mars-icon"),N=p("mars-gui"),j=p("a-form"),G=p("mars-button"),Z=p("a-space"),V=p("mars-dialog");return U(),A(V,{title:"坐标拾取",width:"366",top:"60","min-width":357},{icon:d(()=>[f(y,{icon:"local",width:"18"})]),default:d(()=>[P("div",W,[f(j,null,{default:d(()=>[f(N,{ref_key:"marsGuiRef",ref:n,options:r,labelCol:"5"},null,512)]),_:1}),P("div",q,[f(Z,null,{default:d(()=>[f(G,{onClick:E},{default:d(()=>[F("图上拾取")]),_:1}),f(G,{onClick:x},{default:d(()=>[F("坐标定位")]),_:1})]),_:1})])])]),_:1})}}}),ne=z(H,[["__scopeId","data-v-60f949e1"]]);export{ne as default};
