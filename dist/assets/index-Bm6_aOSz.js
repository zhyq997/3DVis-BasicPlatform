var f=(n,o,t)=>new Promise((i,a)=>{var _=r=>{try{c(t.next(r))}catch(u){a(u)}},l=r=>{try{c(t.throw(r))}catch(u){a(u)}},c=r=>r.done?i(r.value):Promise.resolve(r.value).then(_,l);c((t=t.apply(n,o)).next())});import{m as p,_ as b}from"./entry/index-BNp4bmLj-1732066199007.js";import{u as x}from"./use-lifecycle-CyVQVRUS.js";import{d as L,a7 as y,Z as P,a8 as O,a9 as d,$ as S,k as g,G as m}from"./vue-D4H2Ux2Y.js";import"./antd-DgCI0x_J.js";let e,s;const A={scene:{center:{lat:30.715648,lng:116.300527,alt:10727,heading:3,pitch:-25}}};function k(n){e=n,s=new p.thing.Sightline({visibleColor:new Cesium.Color(0,1,0,.4),hiddenColor:new Cesium.Color(1,0,0,.4)}),e.addThing(s),s.on(p.EventType.end,function(o){})}function v(){C(),e=null}function w(){return f(this,null,function*(){e.graphicLayer.clear();const n=yield e.graphicLayer.startDraw({type:"circle",style:{color:"#ffff00",opacity:.2,clampToGround:!0}});let o=n.positionShow;o=p.PointUtil.addPositionsHeight(o,1.5);const t=n.getOutlinePositions(!1,45);e.graphicLayer.clear(),e.scene.globe.depthTestAgainstTerrain=!0;for(let i=0;i<t.length;i++){let a=t[i];a=p.PointUtil.getSurfacePosition(e.scene,a),s.add(o,a)}h(o,!0),e.scene.globe.depthTestAgainstTerrain=!1})}function T(){return f(this,null,function*(){e.graphicLayer.clear();const o=(yield e.graphicLayer.startDraw({type:"polyline",maxPointNum:2,style:{color:"#55ff33",width:3}})).positionsShow;e.graphicLayer.clear(),e.scene.globe.depthTestAgainstTerrain=!0;const t=o[0],i=o[1];s.add(t,i,{offsetHeight:1.5}),h(t,!0),h(i,!1),e.scene.globe.depthTestAgainstTerrain=!1})}function C(){s.clear(),e.graphicLayer.clear()}function h(n,o){const t=new p.graphic.PointEntity({position:n,style:{color:Cesium.Color.fromCssColorString("#3388ff"),pixelSize:6,outlineColor:Cesium.Color.fromCssColorString("#ffffff"),outlineWidth:2,scaleByDistance:new Cesium.NearFarScalar(150,1,8e6,.2),label:{text:o?"观察位置":"目标点",font_size:17,font_family:"楷体",color:Cesium.Color.AZURE,outline:!0,outlineColor:Cesium.Color.BLACK,outlineWidth:2,horizontalOrigin:Cesium.HorizontalOrigin.CENTER,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,pixelOffset:new Cesium.Cartesian2(0,-20),distanceDisplayCondition:new Cesium.DistanceDisplayCondition(0,2e6)}}});return e.graphicLayer.addGraphic(t),t}const B=Object.freeze(Object.defineProperty({__proto__:null,clearAll:C,drawCircle:w,drawLine:T,get map(){return e},mapOptions:A,onMounted:k,onUnmounted:v},Symbol.toStringTag,{value:"Module"})),D={class:"btn_container"},E=L({__name:"index",setup(n){x(B);const o=()=>{T()},t=()=>{w()},i=()=>{C()};return(a,_)=>{const l=y("mars-button"),c=y("mars-dialog");return P(),O(c,{title:"通视分析",right:"10",top:"60",width:"330"},{default:d(()=>[S("div",D,[g(l,{class:"btn",onClick:o},{default:d(()=>[m("通视分析")]),_:1}),g(l,{class:"btn",onClick:t},{default:d(()=>[m("圆形通视分析")]),_:1}),g(l,{class:"btn",danger:"",onClick:i},{default:d(()=>[m("清除")]),_:1})])]),_:1})}}}),G=b(E,[["__scopeId","data-v-597f5283"]]);export{G as default};
