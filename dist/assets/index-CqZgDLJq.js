var k=(t,e,a)=>new Promise((i,u)=>{var w=d=>{try{x(a.next(d))}catch(y){u(y)}},S=d=>{try{x(a.throw(d))}catch(y){u(y)}},x=d=>d.done?i(d.value):Promise.resolve(d.value).then(w,S);x((a=a.apply(t,e)).next())});import{d as K,r as Q,f as $,a7 as m,Z as D,a8 as M,a9 as c,m as P,$ as l,k as n,G as f,A as T,a1 as X,a0 as Y,a2 as ee,a3 as te}from"./vue-D4H2Ux2Y.js";import{m as v,h as ae,i as ne,_ as oe}from"./entry/index-BNp4bmLj-1732066199007.js";import{u as se}from"./use-lifecycle-CyVQVRUS.js";import"./antd-DgCI0x_J.js";let h,s;const le={scene:{showSun:!1,showMoon:!1,showSkyBox:!1,showSkyAtmosphere:!1,fog:!1,globe:{showGroundAtmosphere:!1,enableLighting:!1}}},H=new v.BaseClass;function ie(t){h=t,s=new v.thing.FloodByMaterial({color:"rgba(0, 123, 230, 0.5)"}),h.addThing(s),s.on(v.EventType.start,function(e){}),s.on(v.EventType.change,function(e){const a=e.height;H.fire("heightChange",{height:a})}),s.on(v.EventType.end,function(e){H.fire("floodEnd")})}function ce(){h=null}function A(t,e){return k(this,null,function*(){C();const a=yield h.graphicLayer.startDraw({type:"rectangle",style:{color:e||"rgba(0, 123, 230, 0.5)"}}),i=a.getOutlinePositions(!1);yield O(a,i,t),s.addArea(i)})}function N(t,e){return k(this,null,function*(){C();const a=yield h.graphicLayer.startDraw({type:"polygon",style:{color:e||"rgba(0, 123, 230, 0.5)",outline:!1}}),i=a.positionsShow;yield O(a,i,t),s.addArea(i)})}function O(t,e,a){return k(this,null,function*(){ae(),t.show=!1;const i=yield v.PolyUtil.interPolygonByDepth({scene:h.scene,positions:e});t.show=!0;const u=Math.ceil(i.minHeight),w=Math.floor(i.maxHeight);a(u,w),ne()})}function V(t){if(s.length===0){globalMsg("请首先绘制分析区域！");return}h.graphicLayer.clear();const e=Number(t.minHeight),a=Number(t.maxHeight),i=Number(t.speed);s.setOptions({minHeight:e,maxHeight:a,speed:i}),s.start()}function I(t){s.height=t}function j(t){s.color=t}function z(){s.isStart?s.stop():s.height>=s._maxHeight-1?s.restart():s.start()}function G(t){s.showElseArea=t}function C(){s.clear(),h.graphicLayer.clear()}const re=Object.freeze(Object.defineProperty({__proto__:null,begin:V,btnDraw:N,btnDrawExtent:A,clearDraw:C,eventTarget:H,get map(){return h},mapOptions:le,onChangeColor:j,onChangeElse:G,onChangeHeight:I,onMounted:ie,onUnmounted:ce,startPlay:z},Symbol.toStringTag,{value:"Module"})),b=t=>(ee("data-v-861cacfe"),t=t(),te(),t),ue={class:"f-mb"},de=b(()=>l("span",{class:"text-default"},"最低海拔:",-1)),he={class:"f-mb"},pe=b(()=>l("span",{class:"text-default"},"最高海拔:",-1)),ge={class:"f-mb"},me=b(()=>l("span",{class:"text-default"},"淹没速度:",-1)),fe={class:"f-push-20-b"},_e=b(()=>l("span",{class:"text-default"},"淹没颜色:",-1)),ve={class:"f-mb"},be={class:"draw-tools"},we={class:"f-tac"},xe={class:"f-mb"},ye=b(()=>l("span",{class:"text-default"},"高度选择",-1)),He={class:"f-mb"},Ce=b(()=>l("span",{class:"text-default"},"淹没颜色:",-1)),ke={class:"f-tac control-btn"},Se={class:"f-pt"},Ee=K({__name:"index",setup(t){se(re);const e=Q({minHeight:0,maxHeight:0,height:0,speed:80,enabledShowElse:!0}),a=$(!0),i=$(!1),u=$("rgba(0, 123, 230, 0.5)");H.on("heightChange",p=>{i.value=!0,e.height=Math.ceil(p.height)}),H.on("floodEnd",p=>{a.value=!1});const w=()=>{A((p,o)=>{e.minHeight=p,e.maxHeight=o},u.value)},S=()=>{N((p,o)=>{e.minHeight=Math.ceil(p),e.maxHeight=Math.ceil(o)},u.value)},x=()=>{C(),e.minHeight=0,e.maxHeight=0},d=()=>{V(e)},y=()=>{I(e.height)},B=p=>{j(u.value)},F=()=>{a.value=!a.value,z()},R=()=>{C(),e.minHeight=0,e.maxHeight=0,i.value=!1,a.value=!0,e.enabledShowElse=!0},W=()=>{G(e.enabledShowElse)};return(p,o)=>{const E=m("mars-input-number"),g=m("a-space"),U=m("mars-color-picker"),_=m("mars-button"),Z=m("mars-slider"),L=m("mars-icon"),q=m("a-checkbox"),J=m("mars-dialog");return D(),M(J,{visible:!0,right:"10",top:"60",width:"330"},{default:c(()=>[P(l("div",null,[l("div",ue,[n(g,null,{default:c(()=>[de,n(E,{value:e.minHeight,"onUpdate:value":o[0]||(o[0]=r=>e.minHeight=r),step:1,"addon-after":"米"},null,8,["value"])]),_:1})]),l("div",he,[n(g,null,{default:c(()=>[pe,n(E,{value:e.maxHeight,"onUpdate:value":o[1]||(o[1]=r=>e.maxHeight=r),step:1,"addon-after":"米"},null,8,["value"])]),_:1})]),l("div",ge,[n(g,null,{default:c(()=>[me,n(E,{value:e.speed,"onUpdate:value":o[2]||(o[2]=r=>e.speed=r),step:1,"addon-after":"米/秒"},null,8,["value"])]),_:1})]),l("div",fe,[n(g,null,{default:c(()=>[_e,n(U,{value:u.value,"onUpdate:value":o[3]||(o[3]=r=>u.value=r),onChange:B},null,8,["value"])]),_:1})]),l("div",ve,[l("div",be,[n(g,null,{default:c(()=>[n(_,{onClick:w},{default:c(()=>[f("绘制矩形")]),_:1}),n(_,{onClick:S},{default:c(()=>[f("绘制多边形")]),_:1}),n(_,{type:"primary",danger:"",onClick:x},{default:c(()=>[f("清除")]),_:1})]),_:1})])]),l("div",we,[n(_,{class:"analysis-btn",onClick:d},{default:c(()=>[f("开始分析")]),_:1})])],512),[[T,!i.value]]),P(l("div",null,[l("div",xe,[n(g,null,{default:c(()=>[ye,n(Z,{tooltipPlacement:"bottom",value:e.height,"onUpdate:value":o[4]||(o[4]=r=>e.height=r),onChange:o[5]||(o[5]=r=>y()),min:e.minHeight,max:e.maxHeight,step:1},null,8,["value","min","max"])]),_:1})]),l("div",He,[n(g,null,{default:c(()=>[Ce,n(U,{value:u.value,"onUpdate:value":o[6]||(o[6]=r=>u.value=r),onChange:B},null,8,["value"])]),_:1})]),l("div",ke,[n(g,null,{default:c(()=>[n(_,{class:X(a.value?"pause-btn":"play-btn"),onClick:F},{default:c(()=>[a.value?(D(),M(L,{key:1,icon:"pause-one"})):(D(),M(L,{key:0,icon:"play"})),f(" "+Y(a.value?"暂停":"播放"),1)]),_:1},8,["class"]),n(_,{onClick:R},{default:c(()=>[f("返回")]),_:1})]),_:1})]),l("div",Se,[n(q,{checked:e.enabledShowElse,"onUpdate:checked":o[7]||(o[7]=r=>e.enabledShowElse=r),onChange:W},{default:c(()=>[f("显示非淹没区域")]),_:1},8,["checked"])])],512),[[T,i.value]])]),_:1})}}}),Le=oe(Ee,[["__scopeId","data-v-861cacfe"]]);export{Le as default};
