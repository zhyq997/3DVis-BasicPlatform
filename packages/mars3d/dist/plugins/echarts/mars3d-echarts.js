/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.7.22
 * 编译日期：2024-07-15 11:22:44
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：泉州中科星桥空天技术有限公司 ，2024-07-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x44ec03=_0x5f85;(function(_0x436355,_0x533f41){const _0x15b1e7={_0x561684:0x1bb,_0xa559fe:0x19d,_0x42fcd1:0x181,_0x462b71:0x1b2,_0x2f30dc:0x1ba},_0x4cd8b4=_0x5f85,_0x278ed9=_0x436355();while(!![]){try{const _0x11a5ad=parseInt(_0x4cd8b4(_0x15b1e7._0x561684))/0x1*(-parseInt(_0x4cd8b4(0x1bc))/0x2)+-parseInt(_0x4cd8b4(0x1b9))/0x3*(-parseInt(_0x4cd8b4(_0x15b1e7._0xa559fe))/0x4)+-parseInt(_0x4cd8b4(0x1a3))/0x5*(-parseInt(_0x4cd8b4(_0x15b1e7._0x42fcd1))/0x6)+parseInt(_0x4cd8b4(0x182))/0x7*(parseInt(_0x4cd8b4(0x19e))/0x8)+parseInt(_0x4cd8b4(0x1c1))/0x9*(parseInt(_0x4cd8b4(_0x15b1e7._0x462b71))/0xa)+-parseInt(_0x4cd8b4(_0x15b1e7._0x2f30dc))/0xb+parseInt(_0x4cd8b4(0x198))/0xc*(-parseInt(_0x4cd8b4(0x1a4))/0xd);if(_0x11a5ad===_0x533f41)break;else _0x278ed9['push'](_0x278ed9['shift']());}catch(_0x380af3){_0x278ed9['push'](_0x278ed9['shift']());}}}(_0x7826,0x6fcf8));function _interopNamespace(_0x5da2d6){const _0x39fb28=_0x5f85;if(_0x5da2d6&&_0x5da2d6['__esModule'])return _0x5da2d6;var _0x514d47=Object[_0x39fb28(0x1b0)](null);return _0x5da2d6&&Object['keys'](_0x5da2d6)['forEach'](function(_0x496b9c){const _0x1e07bb=_0x39fb28;if(_0x496b9c!==_0x1e07bb(0x1b7)){var _0x4e1f2a=Object['getOwnPropertyDescriptor'](_0x5da2d6,_0x496b9c);Object['defineProperty'](_0x514d47,_0x496b9c,_0x4e1f2a['get']?_0x4e1f2a:{'enumerable':!![],'get':function(){return _0x5da2d6[_0x496b9c];}});}}),_0x514d47[_0x39fb28(0x1b7)]=_0x5da2d6,_0x514d47;}function _0x5f85(_0x32493d,_0x15eccb){const _0x7826ac=_0x7826();return _0x5f85=function(_0x5f85e6,_0x4e1f22){_0x5f85e6=_0x5f85e6-0x181;let _0xff90d0=_0x7826ac[_0x5f85e6];return _0xff90d0;},_0x5f85(_0x32493d,_0x15eccb);}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x206f24,_0x372dfa){const _0x1480b6={_0x42ef9e:0x195,_0x2e0406:0x1af},_0x135ff1=_0x5f85;this[_0x135ff1(_0x1480b6._0x42ef9e)]=_0x206f24,this[_0x135ff1(_0x1480b6._0x2e0406)]=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x372dfa;}['setMapOffset'](_0x219c3f){const _0x50f640={_0x2e595a:0x1a5},_0x45887f=_0x5f85;this[_0x45887f(_0x50f640._0x2e595a)]=_0x219c3f;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0x4582fd){const _0x5101bf={_0x53b15d:0x195,_0x19ec01:0x1c9,_0xa175ef:0x186,_0x1ccffa:0x1a5},_0x4ebe5c=_0x5f85,_0x3e2f42=this[_0x4ebe5c(_0x5101bf._0x53b15d)],_0x579036=[NaN,NaN];let _0x306f30=_0x3e2f42['echartsFixedHeight'];_0x3e2f42['echartsAutoHeight']&&(_0x306f30=_0x3e2f42['getHeight'](Cesium$1[_0x4ebe5c(_0x5101bf._0x19ec01)]['fromDegrees'](_0x4582fd[0x0],_0x4582fd[0x1])));const _0xd2d0ba=Cesium$1['Cartesian3']['fromDegrees'](_0x4582fd[0x0],_0x4582fd[0x1],_0x306f30);if(!_0xd2d0ba)return _0x579036;const _0x16594f=Cesium$1['SceneTransforms']['worldToWindowCoordinates'](_0x3e2f42,_0xd2d0ba);if(!_0x16594f)return _0x579036;if(_0x3e2f42['echartsDepthTest']&&_0x3e2f42[_0x4ebe5c(0x191)]===Cesium$1[_0x4ebe5c(0x1a9)]['SCENE3D']){const _0xf40ac=new Cesium$1['EllipsoidalOccluder'](_0x3e2f42[_0x4ebe5c(0x18d)][_0x4ebe5c(_0x5101bf._0xa175ef)],_0x3e2f42[_0x4ebe5c(0x1ab)]['positionWC']),_0x17bf93=_0xf40ac['isPointVisible'](_0xd2d0ba);if(!_0x17bf93)return _0x579036;}return[_0x16594f['x']-this['_mapOffset'][0x0],_0x16594f['y']-this[_0x4ebe5c(_0x5101bf._0x1ccffa)][0x1]];}['getViewRect'](){const _0x1f136d=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x1f136d['getWidth'](),_0x1f136d['getHeight']());}['getRoamTransform'](){const _0x561048={_0x1ae513:0x1c5},_0x2b7b69=_0x5f85;return echarts__namespace[_0x2b7b69(_0x561048._0x1ae513)]['create']();}}CompositeCoordinateSystem['dimensions']=[_0x44ec03(0x18c),_0x44ec03(0x1c2)],CompositeCoordinateSystem['create']=function(_0x52cb5a,_0x1596da){const _0x2f525a={_0x461494:0x1c3},_0x1dfb41={_0x243def:0x1c3};let _0x244bfb;const _0x3a92d2=_0x52cb5a['scheduler']['ecInstance']['_mars3d_scene'];_0x52cb5a['eachComponent']('mars3dMap',function(_0xb5e0f0){const _0x135b59=_0x5f85,_0x31ac5b=_0x1596da['getZr']()['painter'];if(!_0x31ac5b)return;!_0x244bfb&&(_0x244bfb=new CompositeCoordinateSystem(_0x3a92d2,_0x1596da)),_0xb5e0f0[_0x135b59(_0x1dfb41._0x243def)]=_0x244bfb,_0x244bfb['setMapOffset'](_0xb5e0f0['__mapOffset']||[0x0,0x0]);}),_0x52cb5a['eachSeries'](function(_0x2a700d){const _0xcf0717=_0x5f85;_0x2a700d['get'](_0xcf0717(_0x2f525a._0x461494))==='mars3dMap'&&(!_0x244bfb&&(_0x244bfb=new CompositeCoordinateSystem(_0x3a92d2,_0x1596da)),_0x2a700d[_0xcf0717(0x1c3)]=_0x244bfb);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem']('mars3dMap',CompositeCoordinateSystem),echarts__namespace[_0x44ec03(0x1c0)]({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':_0x44ec03(0x183)},function(_0x2a61c2,_0x593813){}),echarts__namespace[_0x44ec03(0x197)]({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x287c8b,_0x550e5d){const _0x530034={_0x40453d:0x1a2,_0x3aced7:0x195,_0x18ad16:0x1c7},_0x55ea8d=_0x44ec03;this['api']=_0x550e5d,this[_0x55ea8d(0x189)]=_0x287c8b[_0x55ea8d(0x196)][_0x55ea8d(_0x530034._0x40453d)][_0x55ea8d(_0x530034._0x3aced7)],this['scene']['postRender'][_0x55ea8d(_0x530034._0x18ad16)](this['moveHandler'],this);},'moveHandler':function(_0x380704,_0x90c6c7){const _0x419cb5=_0x44ec03;this['api'][_0x419cb5(0x194)]({'type':_0x419cb5(0x1b6)});},'render':function(_0x47d76e,_0x10ad30,_0x194eba){},'dispose':function(_0x3a23c3){const _0x5b1b8c={_0x49dad3:0x192},_0x4c1c1c=_0x44ec03;this['scene']['postRender']['removeEventListener'](this[_0x4c1c1c(_0x5b1b8c._0x49dad3)],this);}});else throw new Error('请引入\x20echarts\x20库\x20');function _0x7826(){const _0x175861=['globe','setOption','clientWidth','visible','mode','moveHandler','_echartsInstance','dispatchAction','_mars3d_scene','scheduler','extendComponentModel','36MCgHWe','echarts','style','zIndex','_setOptionsHook','562224iWExhi','616TcizGi','options','_removedHook','top','ecInstance','40kxQVRq','3970044SqTPmo','_mapOffset','setEchartsOption','div','mars3d-echarts','SceneMode','init','camera','canvas','width','left','dimensions','create','_echartsContainer','21930ByHPnP','_map','min','EchartsLayer','mars3dMapRoam','default','_mountedHook','9awuLEM','1024925rrGtrn','1iMBrNF','869870SwVobm','forEach','fromDegrees','layer','registerAction','1908DuWJRZ','lat','coordinateSystem','_pointerEvents','matrix','_addedHook','addEventListener','echartsFixedHeight','Cartographic','204924kGeCFP','67494ocrNCc','updateLayout','eventParent','pointerEvents','ellipsoid','position','series','scene','value','Rectangle','lng'];_0x7826=function(){return _0x175861;};return _0x7826();}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x5c5294={}){const _0x3ef793=_0x44ec03;super(_0x5c5294),this[_0x3ef793(0x1c4)]=this[_0x3ef793(0x19f)]['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x1a5b8b){const _0x187930={_0x18bf12:0x185},_0x5f61ff=_0x44ec03;this['_pointerEvents']=_0x1a5b8b,this['_echartsContainer']&&(_0x1a5b8b?this['_echartsContainer']['style']['pointerEvents']='all':this['_echartsContainer']['style'][_0x5f61ff(_0x187930._0x18bf12)]='none');}[_0x44ec03(0x19c)](_0x51abb7,_0x35ce9d){this['setEchartsOption'](_0x51abb7);}['_showHook'](_0x5d636e){const _0x514661={_0x3b1109:0x1b1},_0x34f3af=_0x44ec03;_0x5d636e?this['_echartsContainer']['style']['visibility']=_0x34f3af(0x190):this[_0x34f3af(_0x514661._0x3b1109)][_0x34f3af(0x19a)]['visibility']='hidden';}[_0x44ec03(0x1b8)](){const _0x5ba681={_0x18b38b:0x1b3,_0x251349:0x1c8},_0x2d0a01=_0x44ec03;this['_map']['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this[_0x2d0a01(_0x5ba681._0x18b38b)]['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this[_0x2d0a01(_0x5ba681._0x18b38b)]['scene'][_0x2d0a01(_0x5ba681._0x251349)]=this['options']['fixedHeight']??0x0;}[_0x44ec03(0x1c6)](){const _0x1eb650=_0x44ec03;this[_0x1eb650(0x1b1)]=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace[_0x1eb650(0x1aa)](this['_echartsContainer']),this['_echartsInstance'][_0x1eb650(0x195)]=this[_0x1eb650(0x1b3)]['scene'],this['setEchartsOption'](this['options']);}[_0x44ec03(0x1a0)](){const _0x548b48={_0x24c944:0x193},_0x1e3202=_0x44ec03;this['_echartsInstance']&&(this['_echartsInstance']['clear'](),this[_0x1e3202(0x193)]['dispose'](),delete this[_0x1e3202(_0x548b48._0x24c944)]),this['_echartsContainer']&&(this['_map']['container']['removeChild'](this['_echartsContainer']),delete this['_echartsContainer']);}['_createChartOverlay'](){const _0x19465c={_0x5678d8:0x1a7,_0x5b8393:0x1a8,_0x1761a8:0x1b3,_0x4512e0:0x187,_0x2ca89a:0x1ae,_0x4c01d4:0x18f,_0x274345:0x19a,_0x48d6e2:0x19a,_0x8d6cc4:0x19f},_0x40eb5f=_0x44ec03,_0x1a726d=mars3d__namespace['DomUtil']['create'](_0x40eb5f(_0x19465c._0x5678d8),_0x40eb5f(_0x19465c._0x5b8393),this[_0x40eb5f(_0x19465c._0x1761a8)]['container']);return _0x1a726d['id']=this['id'],_0x1a726d[_0x40eb5f(0x19a)][_0x40eb5f(_0x19465c._0x4512e0)]='absolute',_0x1a726d['style'][_0x40eb5f(0x1a1)]='0px',_0x1a726d[_0x40eb5f(0x19a)][_0x40eb5f(_0x19465c._0x2ca89a)]='0px',_0x1a726d[_0x40eb5f(0x19a)][_0x40eb5f(0x1ad)]=this[_0x40eb5f(0x1b3)]['scene']['canvas'][_0x40eb5f(_0x19465c._0x4c01d4)]+'px',_0x1a726d[_0x40eb5f(_0x19465c._0x274345)]['height']=this['_map']['scene'][_0x40eb5f(0x1ac)]['clientHeight']+'px',_0x1a726d[_0x40eb5f(_0x19465c._0x48d6e2)]['pointerEvents']=this['_pointerEvents']?'all':'none',_0x1a726d['style'][_0x40eb5f(0x19b)]=this[_0x40eb5f(_0x19465c._0x8d6cc4)]['zIndex']??0x9,_0x1a726d;}['resize'](){const _0x53fbd3={_0x4863c1:0x18f},_0x58ee91=_0x44ec03;if(!this['_echartsInstance'])return;this['_echartsContainer']['style']['width']=this['_map']['scene']['canvas'][_0x58ee91(_0x53fbd3._0x4863c1)]+'px',this['_echartsContainer']['style']['height']=this[_0x58ee91(0x1b3)][_0x58ee91(0x189)]['canvas']['clientHeight']+'px',this['_echartsInstance']['resize']();}[_0x44ec03(0x1a6)](_0x19ef62,_0x3de4f2,_0x200bd6){const _0x4f64e1={_0x268d19:0x184,_0x12ffe8:0x18e},_0x3238c1=_0x44ec03;this['_echartsInstance']&&(_0x19ef62={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x19ef62,{'onlySimpleType':!![]})},delete _0x19ef62[_0x3238c1(_0x4f64e1._0x268d19)],this['_echartsInstance'][_0x3238c1(_0x4f64e1._0x12ffe8)](_0x19ef62,_0x3de4f2,_0x200bd6));}['getRectangle'](_0x325306){const _0x69618={_0x563eff:0x188},_0x5b08db={_0x2bc2af:0x18a},_0x4591f3={_0x2db3dc:0x1b4},_0x4c1bdd=_0x44ec03;let _0x3cc0c5,_0x14b758,_0x3b5b84,_0x3475cf;function _0x532f5b(_0x4334ee){const _0x2c3bc8=_0x5f85;if(!Array['isArray'](_0x4334ee))return;const _0x1f1d74=_0x4334ee[0x0]||0x0,_0x1ee0c1=_0x4334ee[0x1]||0x0;_0x1f1d74!==0x0&&_0x1ee0c1!==0x0&&(_0x3cc0c5===undefined?(_0x3cc0c5=_0x1f1d74,_0x14b758=_0x1f1d74,_0x3b5b84=_0x1ee0c1,_0x3475cf=_0x1ee0c1):(_0x3cc0c5=Math[_0x2c3bc8(_0x4591f3._0x2db3dc)](_0x3cc0c5,_0x1f1d74),_0x14b758=Math['max'](_0x14b758,_0x1f1d74),_0x3b5b84=Math[_0x2c3bc8(0x1b4)](_0x3b5b84,_0x1ee0c1),_0x3475cf=Math['max'](_0x3475cf,_0x1ee0c1)));}const _0x44f8b2=this['options'][_0x4c1bdd(_0x69618._0x563eff)];_0x44f8b2&&_0x44f8b2['forEach'](_0xb40507=>{_0xb40507['data']&&_0xb40507['data']['forEach'](_0x57a92b=>{const _0x3d7fbe=_0x5f85;if(_0x57a92b['value'])_0x532f5b(_0x57a92b[_0x3d7fbe(_0x5b08db._0x2bc2af)]);else _0x57a92b['coords']&&_0x57a92b['coords']['forEach'](_0x22286b=>{_0x532f5b(_0x22286b);});});});if(_0x3cc0c5===0x0&&_0x3b5b84===0x0&&_0x14b758===0x0&&_0x3475cf===0x0)return null;return _0x325306!==null&&_0x325306!==void 0x0&&_0x325306['isFormat']?{'xmin':_0x3cc0c5,'xmax':_0x14b758,'ymin':_0x3b5b84,'ymax':_0x3475cf}:Cesium[_0x4c1bdd(0x18b)][_0x4c1bdd(0x1be)](_0x3cc0c5,_0x3b5b84,_0x14b758,_0x3475cf);}['on'](_0x19afad,_0x20248c,_0x30c4ba){return this['_echartsInstance']['on'](_0x19afad,_0x20248c,_0x30c4ba||this),this;}['onByQuery'](_0x1728c0,_0x7fb3e6,_0x356500,_0x3e1250){return this['_echartsInstance']['on'](_0x1728c0,_0x7fb3e6,_0x356500,_0x3e1250||this),this;}['off'](_0x9cb402,_0x2b39a4,_0x581231){return this['_echartsInstance']['off'](_0x9cb402,_0x2b39a4,_0x581231||this),this;}}mars3d__namespace['LayerUtil']['register'](_0x44ec03(0x199),EchartsLayer),mars3d__namespace[_0x44ec03(0x1bf)][_0x44ec03(0x1b5)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x44ec03(0x1b5)]=EchartsLayer,Object['keys'](echarts)[_0x44ec03(0x1bd)](function(_0x14412f){if(_0x14412f!=='default'&&!exports['hasOwnProperty'](_0x14412f))Object['defineProperty'](exports,_0x14412f,{'enumerable':!![],'get':function(){return echarts[_0x14412f];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
