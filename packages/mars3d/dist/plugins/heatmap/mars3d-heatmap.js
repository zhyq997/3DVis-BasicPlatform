/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.7.22
 * 编译日期：2024-07-15 11:22:44
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：泉州中科星桥空天技术有限公司 ，2024-07-15
 */
(function (global, factory) {
	typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d'))) :
	typeof define === 'function' && define.amd ? define(['exports', 'mars3d'], factory) :
	(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d));
})(this, (function (exports, mars3d) { 
'use strict';var _0x30832f=_0x4ebd;(function(_0x443b85,_0x1d4716){var _0x87a205={_0x108031:0x150,_0x3407bb:0x14b,_0x236f3a:0x17a,_0x51c148:0x175,_0x342cff:0x174,_0x5e7532:0x11d},_0x571c7d=_0x4ebd,_0x230aa1=_0x443b85();while(!![]){try{var _0x2078e8=parseInt(_0x571c7d(0xf5))/0x1*(-parseInt(_0x571c7d(_0x87a205._0x108031))/0x2)+-parseInt(_0x571c7d(0x120))/0x3*(-parseInt(_0x571c7d(_0x87a205._0x3407bb))/0x4)+-parseInt(_0x571c7d(0x122))/0x5*(-parseInt(_0x571c7d(_0x87a205._0x236f3a))/0x6)+parseInt(_0x571c7d(_0x87a205._0x51c148))/0x7*(parseInt(_0x571c7d(_0x87a205._0x342cff))/0x8)+-parseInt(_0x571c7d(0x181))/0x9*(parseInt(_0x571c7d(0x13e))/0xa)+-parseInt(_0x571c7d(0x164))/0xb*(-parseInt(_0x571c7d(_0x87a205._0x5e7532))/0xc)+-parseInt(_0x571c7d(0x117))/0xd;if(_0x2078e8===_0x1d4716)break;else _0x230aa1['push'](_0x230aa1['shift']());}catch(_0xce7f3){_0x230aa1['push'](_0x230aa1['shift']());}}}(_0x15ca,0x75a2e));function _interopNamespace(_0x1fde74){var _0x29d5cb={_0x443641:0x13a},_0x310ae0={_0x2973dc:0x110},_0x1f2857=_0x4ebd;if(_0x1fde74&&_0x1fde74['__esModule'])return _0x1fde74;var _0x3aeb37=Object['create'](null);return _0x1fde74&&Object[_0x1f2857(_0x29d5cb._0x443641)](_0x1fde74)['forEach'](function(_0x36076b){var _0xc8a48=_0x1f2857;if(_0x36076b!==_0xc8a48(_0x310ae0._0x2973dc)){var _0x2f1192=Object['getOwnPropertyDescriptor'](_0x1fde74,_0x36076b);Object['defineProperty'](_0x3aeb37,_0x36076b,_0x2f1192['get']?_0x2f1192:{'enumerable':!![],'get':function(){return _0x1fde74[_0x36076b];}});}}),_0x3aeb37['default']=_0x1fde74,_0x3aeb37;}function _mergeNamespaces(_0x60a197,_0x3a139b){var _0x51a42d={_0x50bcb6:0x176},_0x2885d7={_0x334f78:0x16d};return _0x3a139b['forEach'](function(_0x26c485){var _0x44d843=_0x4ebd;_0x26c485&&typeof _0x26c485!==_0x44d843(0x101)&&!Array[_0x44d843(_0x51a42d._0x50bcb6)](_0x26c485)&&Object['keys'](_0x26c485)['forEach'](function(_0x2c65e6){var _0x224e62=_0x44d843;if(_0x2c65e6!=='default'&&!(_0x2c65e6 in _0x60a197)){var _0x4ac2e5=Object['getOwnPropertyDescriptor'](_0x26c485,_0x2c65e6);Object[_0x224e62(_0x2885d7._0x334f78)](_0x60a197,_0x2c65e6,_0x4ac2e5['get']?_0x4ac2e5:{'enumerable':!![],'get':function(){return _0x26c485[_0x2c65e6];}});}});}),_0x60a197;}var mars3d__namespace=_interopNamespace(mars3d),commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!==_0x30832f(0xfc)?window:typeof global!==_0x30832f(0xfc)?global:typeof self!=='undefined'?self:{},heatmap$1={'exports':{}};(function(_0x25e4e0){var _0x3b5c24={_0x2b8b5e:0x166,_0xf1b5f7:0x16f},_0x438016={_0x23c17b:0x172};(function(_0x39f4d1,_0x37d571,_0x345b26){_0x25e4e0['exports']?_0x25e4e0['exports']=_0x345b26():_0x37d571[_0x39f4d1]=_0x345b26();}('h337',commonjsGlobal,function(){var _0x44ba49={_0x4528c2:0x15f},_0x3a64db={_0x20e098:0x11e},_0x2528cc={_0x4a754c:0x13d},_0x3029d8={_0x39b19c:0x119},_0x7bf690={_0x34020:0x15b,_0x46af66:0x13d},_0x728f35={_0xe05dc7:0x11e},_0x590c7b={_0x35df46:0xef,_0x561cb1:0x14e,_0x529acd:0x167,_0x2ba3f4:0x151,_0x4aba60:0x14e,_0x36195e:0x113,_0x55880a:0x173,_0x19c96d:0x12e},_0x4ca3ab={_0x4ae940:0x183,_0x18d5be:0x147},_0x5e5799={_0x1ce433:0x182,_0x17fb5e:0x10c},_0x55e0a1={_0x32b6e4:0xf9},_0x418f13={_0x25a0ea:0x11e},_0x1162b7={_0x5487bc:0xec},_0x3738bc={_0x46f77c:0x179},_0x214e4d={_0x446708:0x118},_0x3c4757={_0x1df946:0x178},_0x350ffd=_0x4ebd,_0xed1176={'defaultRadius':0x28,'defaultRenderer':'canvas2d','defaultGradient':{0.25:'rgb(0,0,255)',0.55:_0x350ffd(0xf4),0.85:_0x350ffd(_0x3b5c24._0x2b8b5e),0x1:'rgb(255,0,0)'},'defaultMaxOpacity':0x1,'defaultMinOpacity':0x0,'defaultBlur':0.85,'defaultXField':'x','defaultYField':'y','defaultValueField':_0x350ffd(_0x3b5c24._0xf1b5f7),'plugins':{}},_0x4f7673=function _0x307f41(){var _0x1e2f9e={_0x51fcbd:0x168,_0x1c642f:0x126},_0x2d7df4={_0x22a224:0x137},_0xbd8cc3={_0x37fec5:0x124},_0x4443f9={_0x668e71:0x15c},_0x22df5a=_0x350ffd,_0x3bbe4c=function _0x2e73ec(_0x2cae63){var _0x44658c=_0x4ebd;this[_0x44658c(0x11e)]={},this['_data']=[],this['_radi']=[],this['_min']=0xa,this['_max']=0x1,this['_xField']=_0x2cae63['xField']||_0x2cae63['defaultXField'],this[_0x44658c(_0x3c4757._0x1df946)]=_0x2cae63[_0x44658c(0x17e)]||_0x2cae63['defaultYField'],this['_valueField']=_0x2cae63[_0x44658c(0x138)]||_0x2cae63['defaultValueField'],_0x2cae63['radius']&&(this['_cfgRadius']=_0x2cae63['radius']);},_0x1c1d2b=_0xed1176['defaultRadius'];return _0x3bbe4c[_0x22df5a(0x115)]={'_organiseData':function(_0x2b44b4,_0x38c6d6){var _0x2345e5=_0x22df5a,_0x328a41=_0x2b44b4[this[_0x2345e5(_0x214e4d._0x446708)]],_0x3af902=_0x2b44b4[this['_yField']],_0x2fcea0=this[_0x2345e5(0x14f)],_0x3a77c6=this[_0x2345e5(0x126)],_0x5e578d=this['_max'],_0x5150e3=this['_min'],_0x2df77a=_0x2b44b4[this['_valueField']]||0x1,_0x251357=_0x2b44b4['radius']||this['_cfgRadius']||_0x1c1d2b;!_0x3a77c6[_0x328a41]&&(_0x3a77c6[_0x328a41]=[],_0x2fcea0[_0x328a41]=[]);!_0x3a77c6[_0x328a41][_0x3af902]?(_0x3a77c6[_0x328a41][_0x3af902]=_0x2df77a,_0x2fcea0[_0x328a41][_0x3af902]=_0x251357):_0x3a77c6[_0x328a41][_0x3af902]+=_0x2df77a;var _0x549996=_0x3a77c6[_0x328a41][_0x3af902];if(_0x549996>_0x5e578d)return!_0x38c6d6?this['_max']=_0x549996:this['setDataMax'](_0x549996),![];else return _0x549996<_0x5150e3?(!_0x38c6d6?this['_min']=_0x549996:this[_0x2345e5(0x104)](_0x549996),![]):{'x':_0x328a41,'y':_0x3af902,'value':_0x2df77a,'radius':_0x251357,'min':_0x5150e3,'max':_0x5e578d};},'_unOrganizeData':function(){var _0xc54aef=_0x22df5a,_0x35aa40=[],_0x9b08ea=this['_data'],_0x4a8acf=this[_0xc54aef(0x14f)];for(var _0x5dc4d1 in _0x9b08ea){for(var _0x3f76ba in _0x9b08ea[_0x5dc4d1]){_0x35aa40['push']({'x':_0x5dc4d1,'y':_0x3f76ba,'radius':_0x4a8acf[_0x5dc4d1][_0x3f76ba],'value':_0x9b08ea[_0x5dc4d1][_0x3f76ba]});}}return{'min':this[_0xc54aef(_0x3738bc._0x46f77c)],'max':this['_max'],'data':_0x35aa40};},'_onExtremaChange':function(){var _0x151128=_0x22df5a;this['_coordinator'][_0x151128(0x141)](_0x151128(_0x4443f9._0x668e71),{'min':this[_0x151128(0x179)],'max':this['_max']});},'addData':function(){var _0x422191=_0x22df5a;if(arguments[0x0]['length']>0x0){var _0x3a4579=arguments[0x0],_0x4745ad=_0x3a4579['length'];while(_0x4745ad--){this['addData']['call'](this,_0x3a4579[_0x4745ad]);}}else{var _0x4e71fd=this['_organiseData'](arguments[0x0],!![]);_0x4e71fd&&(this['_data'][_0x422191(0x183)]===0x0&&(this['_min']=this['_max']=_0x4e71fd['value']),this['_coordinator'][_0x422191(0x141)](_0x422191(_0x1162b7._0x5487bc),{'min':this['_min'],'max':this[_0x422191(0x168)],'data':[_0x4e71fd]}));}return this;},'setData':function(_0x203eac){var _0xae5ca4=_0x22df5a,_0x43ba7b=_0x203eac['data'],_0x316145=_0x43ba7b['length'];this['_data']=[],this[_0xae5ca4(0x14f)]=[];for(var _0x538cff=0x0;_0x538cff<_0x316145;_0x538cff++){this['_organiseData'](_0x43ba7b[_0x538cff],![]);}return this['_max']=_0x203eac[_0xae5ca4(_0xbd8cc3._0x37fec5)],this['_min']=_0x203eac['min']||0x0,this[_0xae5ca4(0x14a)](),this['_coordinator']['emit'](_0xae5ca4(0x137),this['_getInternalData']()),this;},'removeData':function(){},'setDataMax':function(_0x71a457){var _0x32d8b5=_0x22df5a;return this[_0x32d8b5(0x168)]=_0x71a457,this['_onExtremaChange'](),this[_0x32d8b5(_0x418f13._0x25a0ea)]['emit'](_0x32d8b5(0x137),this[_0x32d8b5(0x17f)]()),this;},'setDataMin':function(_0x88b4c1){var _0x3513e9=_0x22df5a;return this[_0x3513e9(0x179)]=_0x88b4c1,this['_onExtremaChange'](),this['_coordinator'][_0x3513e9(0x141)](_0x3513e9(_0x2d7df4._0x22a224),this['_getInternalData']()),this;},'setCoordinator':function(_0xb76669){this['_coordinator']=_0xb76669;},'_getInternalData':function(){var _0x5849af=_0x22df5a;return{'max':this[_0x5849af(_0x1e2f9e._0x51fcbd)],'min':this['_min'],'data':this[_0x5849af(_0x1e2f9e._0x1c642f)],'radi':this['_radi']};},'getData':function(){return this['_unOrganizeData']();}},_0x3bbe4c;}(),_0xd65425=function _0x45e942(){var _0x3d42e4={_0x50bf82:0x131,_0x2784e1:0x108,_0x35d4af:0x130,_0x2d0871:0x17c},_0x47a512={_0x1601d6:0x124,_0x5f3b52:0x16e,_0x2cbb72:0x131},_0x2774c8={_0x277a9f:0x17c,_0x262957:0x14e},_0x575574={_0x4b6cd5:0x173},_0x37fd5c={_0x30bafb:0x161,_0x20270c:0x11a},_0x2d3b23={_0xc7615b:0x151,_0xce4b75:0x108,_0x32e091:0x173,_0x372500:0x13b,_0x2dc744:0x154},_0x411cd8={_0x3e6153:0x13a},_0x524404=function(_0x2c6cbb){var _0x183710=_0x4ebd,_0x308c10=_0x2c6cbb['gradient']||_0x2c6cbb['defaultGradient'],_0x5203ab=document['createElement'](_0x183710(0x167)),_0x1c68e5=_0x5203ab[_0x183710(0x12f)]('2d',{'willReadFrequently':!![]});_0x5203ab['width']=0x100,_0x5203ab['height']=0x1;var _0x4654d2=_0x1c68e5[_0x183710(_0x55e0a1._0x32b6e4)](0x0,0x0,0x100,0x1);for(var _0x294be4 in _0x308c10){_0x4654d2['addColorStop'](_0x294be4,_0x308c10[_0x294be4]);}return _0x1c68e5['fillStyle']=_0x4654d2,_0x1c68e5['fillRect'](0x0,0x0,0x100,0x1),_0x1c68e5[_0x183710(0x11f)](0x0,0x0,0x100,0x1)['data'];},_0x3a96a2=function(_0x218193,_0x36fb6e){var _0x42c47f=_0x4ebd,_0x17e5d7=document['createElement']('canvas'),_0x90ea38=_0x17e5d7['getContext']('2d',{'willReadFrequently':!![]}),_0x33c4d7=_0x218193,_0x4664b6=_0x218193;_0x17e5d7['width']=_0x17e5d7['height']=_0x218193*0x2;if(_0x36fb6e==0x1)_0x90ea38['beginPath'](),_0x90ea38[_0x42c47f(0xfb)](_0x33c4d7,_0x4664b6,_0x218193,0x0,0x2*Math['PI'],![]),_0x90ea38['fillStyle']='rgba(0,0,0,1)',_0x90ea38[_0x42c47f(_0x5e5799._0x1ce433)]();else{var _0x1c71b8=_0x90ea38['createRadialGradient'](_0x33c4d7,_0x4664b6,_0x218193*_0x36fb6e,_0x33c4d7,_0x4664b6,_0x218193);_0x1c71b8['addColorStop'](0x0,'rgba(0,0,0,1)'),_0x1c71b8['addColorStop'](0x1,'rgba(0,0,0,0)'),_0x90ea38['fillStyle']=_0x1c71b8,_0x90ea38[_0x42c47f(_0x5e5799._0x17fb5e)](0x0,0x0,0x2*_0x218193,0x2*_0x218193);}return _0x17e5d7;},_0x34fffb=function(_0x8e518c){var _0x38010d=_0x4ebd,_0x293654=[],_0x2e33fb=_0x8e518c['min'],_0x23b467=_0x8e518c['max'],_0x270fee=_0x8e518c['radi'],_0x8e518c=_0x8e518c['data'],_0x4c1e52=Object['keys'](_0x8e518c),_0x4a75f4=_0x4c1e52['length'];while(_0x4a75f4--){var _0x5d4b92=_0x4c1e52[_0x4a75f4],_0x441e51=Object[_0x38010d(_0x411cd8._0x3e6153)](_0x8e518c[_0x5d4b92]),_0x65024e=_0x441e51['length'];while(_0x65024e--){var _0x3eda49=_0x441e51[_0x65024e],_0x39a86f=_0x8e518c[_0x5d4b92][_0x3eda49],_0x4d8f50=_0x270fee[_0x5d4b92][_0x3eda49];_0x293654['push']({'x':_0x5d4b92,'y':_0x3eda49,'value':_0x39a86f,'radius':_0x4d8f50});}}return{'min':_0x2e33fb,'max':_0x23b467,'data':_0x293654};};function _0x4ba852(_0x4ede5f){var _0x21dc7d=_0x4ebd,_0x49a3e7=_0x4ede5f['container'],_0x44e233=this['shadowCanvas']=document['createElement']('canvas'),_0x18889b=this['canvas']=_0x4ede5f['canvas']||document[_0x21dc7d(0x102)](_0x21dc7d(0x167));this['_renderBoundaries']=[0x2710,0x2710,0x0,0x0];var _0x51c61c=getComputedStyle(_0x4ede5f['container'])||{};_0x18889b['className']='heatmap-canvas',this[_0x21dc7d(0x14e)]=_0x18889b[_0x21dc7d(0x151)]=_0x44e233['width']=_0x4ede5f[_0x21dc7d(_0x2d3b23._0xc7615b)]||+_0x51c61c['width']['replace'](/px/,''),this[_0x21dc7d(_0x2d3b23._0xce4b75)]=_0x18889b[_0x21dc7d(_0x2d3b23._0x32e091)]=_0x44e233[_0x21dc7d(0x173)]=_0x4ede5f['height']||+_0x51c61c['height']['replace'](/px/,''),this['shadowCtx']=_0x44e233['getContext']('2d',{'willReadFrequently':!![]}),this[_0x21dc7d(0x132)]=_0x18889b['getContext']('2d',{'willReadFrequently':!![]}),_0x18889b['style'][_0x21dc7d(_0x2d3b23._0x372500)]=_0x44e233['style']['cssText']='position:absolute;left:0;top:0;',_0x49a3e7[_0x21dc7d(0x186)]['position']='relative',_0x49a3e7['appendChild'](_0x18889b),this[_0x21dc7d(_0x2d3b23._0x2dc744)]=_0x524404(_0x4ede5f),this['_templates']={},this[_0x21dc7d(0x11a)](_0x4ede5f);}return _0x4ba852['prototype']={'renderPartial':function(_0x2ef822){var _0x2c52e8=_0x4ebd;_0x2ef822['data']['length']>0x0&&(this['_drawAlpha'](_0x2ef822),this[_0x2c52e8(0x147)]());},'renderAll':function(_0x59ea21){var _0x1be396=_0x4ebd;this[_0x1be396(0x12c)](),_0x59ea21['data'][_0x1be396(_0x4ca3ab._0x4ae940)]>0x0&&(this['_drawAlpha'](_0x34fffb(_0x59ea21)),this[_0x1be396(_0x4ca3ab._0x18d5be)]());},'_updateGradient':function(_0x11d035){this['_palette']=_0x524404(_0x11d035);},'updateConfig':function(_0x2ea6f3){var _0x52c44b=_0x4ebd;_0x2ea6f3[_0x52c44b(_0x37fd5c._0x30bafb)]&&this['_updateGradient'](_0x2ea6f3),this[_0x52c44b(_0x37fd5c._0x20270c)](_0x2ea6f3);},'setDimensions':function(_0x573ea0,_0x102e62){var _0x2d39ab=_0x4ebd;this['_width']=_0x573ea0,this[_0x2d39ab(0x108)]=_0x102e62,this['canvas']['width']=this[_0x2d39ab(0x113)]['width']=_0x573ea0,this['canvas'][_0x2d39ab(_0x575574._0x4b6cd5)]=this['shadowCanvas']['height']=_0x102e62;},'_clear':function(){var _0x32c2fd=_0x4ebd;this[_0x32c2fd(_0x2774c8._0x277a9f)]['clearRect'](0x0,0x0,this['_width'],this['_height']),this['ctx']['clearRect'](0x0,0x0,this[_0x32c2fd(_0x2774c8._0x262957)],this['_height']);},'_setStyles':function(_0x361f41){var _0x4ffab7=_0x4ebd;this['_blur']=_0x361f41['blur']==0x0?0x0:_0x361f41[_0x4ffab7(0xed)]||_0x361f41['defaultBlur'],_0x361f41['backgroundColor']&&(this['canvas']['style'][_0x4ffab7(_0x590c7b._0x35df46)]=_0x361f41['backgroundColor']),this[_0x4ffab7(_0x590c7b._0x561cb1)]=this[_0x4ffab7(_0x590c7b._0x529acd)]['width']=this['shadowCanvas']['width']=_0x361f41[_0x4ffab7(_0x590c7b._0x2ba3f4)]||this[_0x4ffab7(_0x590c7b._0x4aba60)],this['_height']=this['canvas'][_0x4ffab7(0x173)]=this[_0x4ffab7(_0x590c7b._0x36195e)][_0x4ffab7(_0x590c7b._0x55880a)]=_0x361f41[_0x4ffab7(0x173)]||this['_height'],this[_0x4ffab7(0x135)]=(_0x361f41['opacity']||0x0)*0xff,this['_maxOpacity']=(_0x361f41['maxOpacity']||_0x361f41[_0x4ffab7(_0x590c7b._0x19c96d)])*0xff,this['_minOpacity']=(_0x361f41[_0x4ffab7(0xfe)]||_0x361f41[_0x4ffab7(0x103)])*0xff,this['_useGradientOpacity']=!!_0x361f41['useGradientOpacity'];},'_drawAlpha':function(_0x363a76){var _0xb31ebb=_0x4ebd,_0x397c02=this['_min']=_0x363a76['min'],_0x50d540=this['_max']=_0x363a76[_0xb31ebb(_0x47a512._0x1601d6)],_0x363a76=_0x363a76['data']||[],_0x21da88=_0x363a76['length'],_0x45f947=0x1-this['_blur'];while(_0x21da88--){var _0x1621c7=_0x363a76[_0x21da88],_0x1b1983=_0x1621c7['x'],_0x19b82e=_0x1621c7['y'],_0x439ac8=_0x1621c7['radius'],_0x1b58ec=Math['min'](_0x1621c7['value'],_0x50d540),_0xd0a46c=_0x1b1983-_0x439ac8,_0x27f554=_0x19b82e-_0x439ac8,_0x1cf6fc=this['shadowCtx'],_0x4759c3;!this['_templates'][_0x439ac8]?this[_0xb31ebb(_0x47a512._0x5f3b52)][_0x439ac8]=_0x4759c3=_0x3a96a2(_0x439ac8,_0x45f947):_0x4759c3=this[_0xb31ebb(0x16e)][_0x439ac8];var _0x20879e=(_0x1b58ec-_0x397c02)/(_0x50d540-_0x397c02);_0x1cf6fc['globalAlpha']=_0x20879e<0.01?0.01:_0x20879e,_0x1cf6fc['drawImage'](_0x4759c3,_0xd0a46c,_0x27f554),_0xd0a46c<this['_renderBoundaries'][0x0]&&(this['_renderBoundaries'][0x0]=_0xd0a46c),_0x27f554<this[_0xb31ebb(_0x47a512._0x2cbb72)][0x1]&&(this[_0xb31ebb(0x131)][0x1]=_0x27f554),_0xd0a46c+0x2*_0x439ac8>this['_renderBoundaries'][0x2]&&(this['_renderBoundaries'][0x2]=_0xd0a46c+0x2*_0x439ac8),_0x27f554+0x2*_0x439ac8>this[_0xb31ebb(0x131)][0x3]&&(this['_renderBoundaries'][0x3]=_0x27f554+0x2*_0x439ac8);}},'_colorize':function(){var _0x44edbe=_0x4ebd,_0x33d97d=this[_0x44edbe(_0x3d42e4._0x50bf82)][0x0],_0x2eaf96=this['_renderBoundaries'][0x1],_0x2e8f8d=this['_renderBoundaries'][0x2]-_0x33d97d,_0x23a7b6=this['_renderBoundaries'][0x3]-_0x2eaf96,_0x16ceef=this['_width'],_0x103a29=this[_0x44edbe(_0x3d42e4._0x2784e1)],_0x2a8abc=this['_opacity'],_0x45bd56=this['_maxOpacity'],_0x4b3de9=this['_minOpacity'],_0x11f4c4=this[_0x44edbe(_0x3d42e4._0x35d4af)];_0x33d97d<0x0&&(_0x33d97d=0x0);_0x2eaf96<0x0&&(_0x2eaf96=0x0);_0x33d97d+_0x2e8f8d>_0x16ceef&&(_0x2e8f8d=_0x16ceef-_0x33d97d);_0x2eaf96+_0x23a7b6>_0x103a29&&(_0x23a7b6=_0x103a29-_0x2eaf96);var _0x22b2eb=this[_0x44edbe(_0x3d42e4._0x2d0871)]['getImageData'](_0x33d97d,_0x2eaf96,_0x2e8f8d,_0x23a7b6),_0x1ef07f=_0x22b2eb[_0x44edbe(0x162)],_0x5b88c=_0x1ef07f['length'],_0x563f9f=this['_palette'];for(var _0x3566d6=0x3;_0x3566d6<_0x5b88c;_0x3566d6+=0x4){var _0x2cbc7b=_0x1ef07f[_0x3566d6],_0xaac907=_0x2cbc7b*0x4;if(!_0xaac907)continue;var _0xea5868;_0x2a8abc>0x0?_0xea5868=_0x2a8abc:_0x2cbc7b<_0x45bd56?_0x2cbc7b<_0x4b3de9?_0xea5868=_0x4b3de9:_0xea5868=_0x2cbc7b:_0xea5868=_0x45bd56,_0x1ef07f[_0x3566d6-0x3]=_0x563f9f[_0xaac907],_0x1ef07f[_0x3566d6-0x2]=_0x563f9f[_0xaac907+0x1],_0x1ef07f[_0x3566d6-0x1]=_0x563f9f[_0xaac907+0x2],_0x1ef07f[_0x3566d6]=_0x11f4c4?_0x563f9f[_0xaac907+0x3]:_0xea5868;}this['ctx']['putImageData'](_0x22b2eb,_0x33d97d,_0x2eaf96),this['_renderBoundaries']=[0x3e8,0x3e8,0x0,0x0];},'getValueAt':function(_0x80a864){var _0x4872c1=_0x4ebd,_0x5c089b,_0x5b4d3d=this['shadowCtx'],_0x54cb32=_0x5b4d3d['getImageData'](_0x80a864['x'],_0x80a864['y'],0x1,0x1),_0x4bcb18=_0x54cb32['data'][0x3],_0x555fc0=this[_0x4872c1(0x168)],_0x848bdd=this['_min'];return _0x5c089b=Math['abs'](_0x555fc0-_0x848bdd)*(_0x4bcb18/0xff)>>0x0,_0x5c089b;},'getDataURL':function(){var _0x164b8a=_0x4ebd;return this[_0x164b8a(0x167)]['toDataURL']();}},_0x4ba852;}(),_0x14f756=function _0x25ebdb(){var _0x42d991=_0x350ffd,_0x14d6f9=![];return _0xed1176['defaultRenderer']===_0x42d991(_0x438016._0x23c17b)&&(_0x14d6f9=_0xd65425),_0x14d6f9;}(),_0x2a659b={'merge':function(){var _0x352a72={},_0x35ee60=arguments['length'];for(var _0x60d6e4=0x0;_0x60d6e4<_0x35ee60;_0x60d6e4++){var _0x3cca66=arguments[_0x60d6e4];for(var _0x211e34 in _0x3cca66){_0x352a72[_0x211e34]=_0x3cca66[_0x211e34];}}return _0x352a72;}},_0x36099f=function _0x3a8494(){var _0x42895d={_0x275ea1:0x105},_0x4ae9d3={_0x61b7dd:0x12d},_0x2282a0={_0xd85686:0x111},_0x314c9f={_0x41cbdb:0x116},_0x176231=function _0x13ff12(){function _0x583b08(){var _0x2d680c=_0x4ebd;this[_0x2d680c(0x177)]={};}return _0x583b08['prototype']={'on':function(_0x5a6d6f,_0x33c677,_0xba2d03){var _0x24a0ae=_0x4ebd,_0xe70dd=this['cStore'];!_0xe70dd[_0x5a6d6f]&&(_0xe70dd[_0x5a6d6f]=[]),_0xe70dd[_0x5a6d6f][_0x24a0ae(_0x314c9f._0x41cbdb)](function(_0x590c6d){return _0x33c677['call'](_0xba2d03,_0x590c6d);});},'emit':function(_0x1a93e4,_0x49d67f){var _0x3697a1=this['cStore'];if(_0x3697a1[_0x1a93e4]){var _0x29bd92=_0x3697a1[_0x1a93e4]['length'];for(var _0x4bbd40=0x0;_0x4bbd40<_0x29bd92;_0x4bbd40++){var _0x4c874a=_0x3697a1[_0x1a93e4][_0x4bbd40];_0x4c874a(_0x49d67f);}}}},_0x583b08;}(),_0x222e73=function(_0x1c8ee6){var _0x112ba7=_0x4ebd,_0x2275a1=_0x1c8ee6['_renderer'],_0x270f63=_0x1c8ee6['_coordinator'],_0x25991d=_0x1c8ee6['_store'];_0x270f63['on']('renderpartial',_0x2275a1['renderPartial'],_0x2275a1),_0x270f63['on']('renderall',_0x2275a1['renderAll'],_0x2275a1),_0x270f63['on'](_0x112ba7(0x15c),function(_0x4f8563){var _0x1dbc58=_0x112ba7;_0x1c8ee6[_0x1dbc58(0x111)]['onExtremaChange']&&_0x1c8ee6[_0x1dbc58(0x111)]['onExtremaChange']({'min':_0x4f8563['min'],'max':_0x4f8563[_0x1dbc58(0x124)],'gradient':_0x1c8ee6[_0x1dbc58(0x111)]['gradient']||_0x1c8ee6[_0x1dbc58(_0x2282a0._0xd85686)]['defaultGradient']});}),_0x25991d[_0x112ba7(0x15e)](_0x270f63);};function _0x5f3d5c(){var _0x284761=_0x4ebd,_0x5a4338=this[_0x284761(0x111)]=_0x2a659b['merge'](_0xed1176,arguments[0x0]||{});this[_0x284761(_0x728f35._0xe05dc7)]=new _0x176231();if(_0x5a4338['plugin']){var _0x44c6c5=_0x5a4338['plugin'];if(!_0xed1176['plugins'][_0x44c6c5])throw new Error(_0x284761(0x14c)+_0x44c6c5+'\x27\x20not\x20found.\x20Maybe\x20it\x20was\x20not\x20registered.');else{var _0x2b0aea=_0xed1176[_0x284761(0xfd)][_0x44c6c5];this['_renderer']=new _0x2b0aea['renderer'](_0x5a4338),this['_store']=new _0x2b0aea['store'](_0x5a4338);}}else this['_renderer']=new _0x14f756(_0x5a4338),this['_store']=new _0x4f7673(_0x5a4338);_0x222e73(this);}return _0x5f3d5c['prototype']={'addData':function(){var _0x1bee00=_0x4ebd;return this['_store'][_0x1bee00(_0x4ae9d3._0x61b7dd)]['apply'](this[_0x1bee00(0x15b)],arguments),this;},'removeData':function(){var _0x11080f=_0x4ebd;return this[_0x11080f(_0x7bf690._0x34020)][_0x11080f(0x13c)]&&this[_0x11080f(0x15b)]['removeData'][_0x11080f(_0x7bf690._0x46af66)](this['_store'],arguments),this;},'setData':function(){var _0x331735=_0x4ebd;return this['_store'][_0x331735(_0x3029d8._0x39b19c)]['apply'](this[_0x331735(0x15b)],arguments),this;},'setDataMax':function(){return this['_store']['setDataMax']['apply'](this['_store'],arguments),this;},'setDataMin':function(){var _0x2201f8=_0x4ebd;return this['_store']['setDataMin'][_0x2201f8(_0x2528cc._0x4a754c)](this['_store'],arguments),this;},'configure':function(_0x3248f4){var _0xe5a059=_0x4ebd;return this['_config']=_0x2a659b['merge'](this['_config'],_0x3248f4),this['_renderer']['updateConfig'](this['_config']),this['_coordinator'][_0xe5a059(0x141)]('renderall',this['_store'][_0xe5a059(0x17f)]()),this;},'repaint':function(){var _0x1363e2=_0x4ebd;return this[_0x1363e2(_0x3a64db._0x20e098)]['emit']('renderall',this['_store']['_getInternalData']()),this;},'getData':function(){var _0x4c9002=_0x4ebd;return this['_store'][_0x4c9002(_0x42895d._0x275ea1)]();},'getDataURL':function(){return this['_renderer']['getDataURL']();},'getValueAt':function(_0x5a9d3a){var _0x2ab9c1=_0x4ebd;if(this['_store']['getValueAt'])return this['_store'][_0x2ab9c1(0x10a)](_0x5a9d3a);else return this[_0x2ab9c1(_0x44ba49._0x4528c2)]['getValueAt']?this['_renderer']['getValueAt'](_0x5a9d3a):null;}},_0x5f3d5c;}(),_0x45c022={'create':function(_0x871532){return new _0x36099f(_0x871532);},'register':function(_0x34cd4e,_0x47ea12){_0xed1176['plugins'][_0x34cd4e]=_0x47ea12;}};return _0x45c022;}));}(heatmap$1));var heatmap=heatmap$1[_0x30832f(0x165)],h337=_mergeNamespaces({'__proto__':null,'default':heatmap},[heatmap$1['exports']]),HeatMaterial='uniform\x20sampler2D\x20image;\x0a\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x20{\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture(image,\x20st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0))\x20{\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a';if(!heatmap$1['exports']['create'])throw new Error('请引入\x20heatmap.js\x20库\x20');const Cesium=mars3d__namespace[_0x30832f(0x142)],BaseLayer=mars3d__namespace['layer']['BaseLayer'],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:_0x30832f(0x145),0.6:'green',0.8:'yellow',0.9:'red'}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium['EllipsoidSurfaceAppearance']['VERTEX_FORMAT']};class HeatLayer extends BaseLayer{constructor(_0x2b5ac2={}){var _0x3202e6={_0x47083f:0x100,_0x123abe:0xee,_0x5b01dc:0x100},_0x7a20f9=_0x30832f;super(_0x2b5ac2),this['options'][_0x7a20f9(0xf1)]=this['options']['maxCanvasSize']??document['body']['clientWidth'],this[_0x7a20f9(0x100)][_0x7a20f9(0xf1)]=Math['min'](this[_0x7a20f9(_0x3202e6._0x47083f)]['maxCanvasSize'],0x1388),this['options']['minCanvasSize']=this[_0x7a20f9(0x100)]['minCanvasSize']??document[_0x7a20f9(_0x3202e6._0x123abe)]['clientHeight'],this['options']['minCanvasSize']=Math['max'](this['options']['minCanvasSize'],0x2bc),this[_0x7a20f9(_0x3202e6._0x5b01dc)]['heatStyle']={...DEF_HEATSTYLE,...this[_0x7a20f9(0x100)]['heatStyle']},this['options'][_0x7a20f9(0x186)]={...DEF_STYLE,...this['options'][_0x7a20f9(0x186)]};}get['layer'](){return this['_layer'];}get['heatStyle'](){return this['options']['heatStyle'];}set[_0x30832f(0x17b)](_0x38ed35){var _0x513ef6={_0x1113e6:0x12b},_0x463a08=_0x30832f;this['options']['heatStyle']=mars3d__namespace[_0x463a08(0x16a)][_0x463a08(_0x513ef6._0x1113e6)](this['options']['heatStyle'],_0x38ed35),this['_heat']&&(this['_heat']['configure'](this['options']['heatStyle']),this['_updatePositionsHook'](!![]));}get[_0x30832f(0x186)](){return this['options']['style'];}set['style'](_0x385f8c){var _0x34085a={_0x264e17:0x186},_0x5ce686=_0x30832f;this['options'][_0x5ce686(_0x34085a._0x264e17)]=mars3d__namespace[_0x5ce686(0x16a)]['merge'](this['options']['style'],_0x385f8c);}get[_0x30832f(0x146)](){return this['_positions'];}set['positions'](_0xb4f946){var _0x5e24b1=_0x30832f;this[_0x5e24b1(0x156)](_0xb4f946);}get['coordinates'](){const _0x25f163=[];return this['points']['forEach'](_0x956274=>{_0x25f163['push'](_0x956274['toArray']());}),_0x25f163;}get[_0x30832f(0xff)](){return this['_rectangle'];}[_0x30832f(0x140)](_0x4c11d9,_0x9ae6f8){var _0x507280={_0x3ed77e:0x146},_0xdcdc93=_0x30832f;_0x4c11d9[_0xdcdc93(_0x507280._0x3ed77e)]&&(this[_0xdcdc93(0x146)]=_0x4c11d9[_0xdcdc93(_0x507280._0x3ed77e)]);}[_0x30832f(0x171)](){var _0x25c022={_0xf02a09:0x133,_0x2e8c05:0x144,_0x4f572e:0xf2},_0x559d0a=_0x30832f;this['style']['type']==='image'?this['_layer']=new mars3d__namespace['layer'][(_0x559d0a(_0x25c022._0xf02a09))]({'crs':'EPSG:3857','private':!![]}):this[_0x559d0a(_0x25c022._0x2e8c05)]=new mars3d__namespace['layer'][(_0x559d0a(_0x25c022._0x4f572e))]({'private':!![]});}['_addedHook'](){var _0x4cd723={_0x1e13c4:0x144,_0x52e90d:0x148,_0x37b890:0xf8,_0x4be4b8:0x123},_0x3bacef=_0x30832f;this['_map']['addLayer'](this[_0x3bacef(_0x4cd723._0x1e13c4)]),this[_0x3bacef(_0x4cd723._0x52e90d)]=mars3d__namespace['DomUtil'][_0x3bacef(_0x4cd723._0x37b890)]('div','mars3d-heatmap\x20mars3d-hideDiv',this['_map']['container']),this['options']['positions']&&(this['positions']=this[_0x3bacef(0x100)]['positions']),this['options']['flyTo']&&this[_0x3bacef(_0x4cd723._0x4be4b8)]();}[_0x30832f(0xe9)](){var _0x368ba6={_0x4e82bb:0x109},_0x3bddde=_0x30832f;this['_container']&&(mars3d__namespace['DomUtil']['remove'](this['_container']),delete this['_container']),this[_0x3bddde(_0x368ba6._0x4e82bb)](),this['_map']['removeLayer'](this['_layer']);}['addPosition'](_0x1f1a60,_0x44b8b1){var _0x2daecb={_0x4f6ff7:0x116},_0x3dd42e=_0x30832f;this['_positions']=this[_0x3dd42e(0x155)]||[],this['_positions'][_0x3dd42e(_0x2daecb._0x4f6ff7)](_0x1f1a60),this[_0x3dd42e(0x15a)](_0x44b8b1);}[_0x30832f(0x156)](_0x4bffeb,_0x12c350){var _0x3645b9={_0x3b91cb:0x15a},_0x1498cd=_0x30832f;this['_positions']=_0x4bffeb,this[_0x1498cd(_0x3645b9._0x3b91cb)](_0x12c350);}['clear'](){var _0x49fb63={_0x49c9d2:0xea},_0x580b7a=_0x30832f;this['_graphic']&&(this['_layer']['removeGraphic'](this['_graphic'],!![]),delete this['_graphic']),this['_graphic2']&&(this['_layer'][_0x580b7a(_0x49fb63._0x49c9d2)](this['_graphic2'],!![]),delete this['_graphic2']);}[_0x30832f(0x15a)](_0x2a0bf5){var _0x3d36e8={_0x10527a:0x134,_0x5b6db2:0x11c,_0x332125:0x184},_0x5ee251=_0x30832f;if(!this[_0x5ee251(0xf3)]||!this['_map']||!this[_0x5ee251(0x146)]||this['positions']['length']===0x0)return this;const _0x3a98b7=this['_getHeatCanvas']();if(this[_0x5ee251(0x186)][_0x5ee251(0x180)]==='image')this[_0x5ee251(0x144)][_0x5ee251(0x185)]({'url':_0x3a98b7[_0x5ee251(_0x3d36e8._0x10527a)]('image/png',0x1),'rectangle':this['_rectangle'],'opacity':this['style']['opacity']});else this['style']['arc']?this['_graphic']&&_0x2a0bf5?(this['_graphic']['uniforms'][_0x5ee251(0x12a)]=_0x3a98b7,this['_graphic']['uniforms']['bumpMap']=this['_getArcHeatCanvas'](),this['_graphic2']&&(this['_graphic2'][_0x5ee251(_0x3d36e8._0x5b6db2)]['image']=_0x3a98b7,this['_graphic2']['uniforms']['bumpMap']=this['_graphic']['uniforms']['bumpMap'])):this[_0x5ee251(_0x3d36e8._0x332125)](_0x3a98b7):this[_0x5ee251(0x157)]&&_0x2a0bf5?this['_graphic']['uniforms']['image']=_0x3a98b7:this['_createGraphic'](_0x3a98b7);return this;}['_createGraphic'](_0x3b3820){var _0x4794c4={_0x30b7d4:0x100,_0x1d3742:0x121},_0x5c49db=_0x30832f;this[_0x5c49db(0x109)](),this['_graphic']=new mars3d__namespace['graphic']['RectanglePrimitive']({...this[_0x5c49db(_0x4794c4._0x30b7d4)],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':mars3d__namespace[_0x5c49db(0x10d)][_0x5c49db(_0x4794c4._0x1d3742)](mars3d__namespace['MaterialType']['Image2'],{'image':_0x3b3820}),'flat':!![]})}),this['_layer']['addGraphic'](this['_graphic']);}['_createArcGraphic'](_0x1f573c){var _0x5e5d4a={_0x49c64e:0x114,_0xbb003d:0x16b,_0x337c30:0x170,_0x298f20:0x106,_0x536a4e:0x106,_0x51483d:0x186,_0x45fdc4:0xeb,_0x3d97bc:0x157,_0x2f3216:0x10b},_0x460699=_0x30832f;this['clear']();const _0x2bd83f=Cesium['RenderState'][_0x460699(_0x5e5d4a._0x49c64e)]({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium[_0x460699(_0x5e5d4a._0xbb003d)]['ALWAYS'],'frontOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium['StencilOperation']['KEEP'],'zPass':Cesium['StencilOperation']['REPLACE']},'backFunction':Cesium[_0x460699(_0x5e5d4a._0xbb003d)]['ALWAYS'],'backOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium[_0x460699(_0x5e5d4a._0x337c30)]['KEEP'],'zPass':Cesium['StencilOperation']['REPLACE']},'reference':0x2,'mask':0x2},'blending':Cesium[_0x460699(0x127)]['ALPHA_BLEND']}),_0x5d1cd8=Math['floor'](this['style'][_0x460699(_0x5e5d4a._0x298f20)]??this['_mBoundsMax']*0.02)+0.1;this[_0x460699(0x186)][_0x460699(_0x5e5d4a._0x536a4e)]&&delete this[_0x460699(_0x5e5d4a._0x51483d)]['diffHeight'];const _0x35b1d4=(this[_0x460699(0x186)][_0x460699(0x14d)],0x64);let _0x26be96=Math['max'](this['_rectangle'][_0x460699(0x173)],this[_0x460699(_0x5e5d4a._0x45fdc4)]['width']);this[_0x460699(_0x5e5d4a._0x51483d)][_0x460699(0x112)]=_0x26be96/=_0x35b1d4;const _0x2becc4=new Cesium['Material']({'fabric':{'uniforms':{'image':_0x1f573c,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),_0x42bd4a=this[_0x460699(0x186)]['arcDirection']||0x1;this[_0x460699(0x157)]=new mars3d__namespace['graphic']['RectanglePrimitive']({...this['options'],'rectangle':this[_0x460699(0xeb)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x2bd83f,'material':_0x2becc4,'vertexShaderSource':getVertexShaderSource(_0x5d1cd8*_0x42bd4a)})}),this['_layer']['addGraphic'](this[_0x460699(_0x5e5d4a._0x3d97bc)]),this['style']['arcDirection']===0x0&&(this['_graphic2']=new mars3d__namespace['graphic']['RectanglePrimitive']({...this[_0x460699(0x100)],'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x2bd83f,'material':_0x2becc4,'vertexShaderSource':getVertexShaderSource(-_0x5d1cd8)})}),this['_layer']['addGraphic'](this[_0x460699(_0x5e5d4a._0x2f3216)]));}['getRectangle'](_0x2f7e51){var _0x48b781={_0x5ef9e9:0x153},_0x155190=_0x30832f;return _0x2f7e51!==null&&_0x2f7e51!==void 0x0&&_0x2f7e51['isFormat']&&this['_rectangle']?mars3d__namespace[_0x155190(_0x48b781._0x5ef9e9)]['formatRectangle'](this['_rectangle']):this['_rectangle'];}['_getHeatCanvas'](){var _0x933bbc={_0x59b2c9:0x128,_0x44524c:0x17d,_0x4d1426:0x124,_0x2d7bed:0x13f,_0x115240:0x100,_0x3cb18b:0x15d,_0x53cc96:0x10e,_0x3329c6:0x128,_0x5c3992:0x160,_0xde4db2:0x169,_0x434b19:0x165,_0x15a2ce:0xfa},_0x16ec26={_0x12295d:0x136,_0x2f0e4e:0x159,_0x5b5cc5:0x158,_0x480fdc:0x160,_0x105d0b:0x10e},_0x2c86a5={_0x4f717d:0x10f,_0x2384ee:0x16f,_0x50094b:0x16c,_0x333c3f:0x136,_0x32750e:0x16c},_0x411cb0=_0x30832f;const _0x5d76fc=this[_0x411cb0(0x155)],_0x3e5e2b=[];let _0x1cd378,_0x2278a6,_0x38ae4b,_0x21ce1e;_0x5d76fc[_0x411cb0(0x163)](_0x7d3183=>{var _0x4a1f48=_0x411cb0;const _0x160c37=mars3d__namespace[_0x4a1f48(_0x2c86a5._0x4f717d)]['parse'](_0x7d3183);if(!_0x160c37)return;_0x160c37[_0x4a1f48(_0x2c86a5._0x2384ee)]=_0x7d3183[_0x4a1f48(0x16f)]||0x1,!this[_0x4a1f48(0x100)]['rectangle']&&(_0x1cd378===undefined?(_0x1cd378=_0x160c37['lng'],_0x2278a6=_0x160c37['lng'],_0x38ae4b=_0x160c37['lat'],_0x21ce1e=_0x160c37[_0x4a1f48(_0x2c86a5._0x50094b)]):(_0x1cd378=Math['min'](_0x1cd378,_0x160c37[_0x4a1f48(_0x2c86a5._0x333c3f)]),_0x2278a6=Math['max'](_0x2278a6,_0x160c37[_0x4a1f48(_0x2c86a5._0x333c3f)]),_0x38ae4b=Math['min'](_0x38ae4b,_0x160c37['lat']),_0x21ce1e=Math['max'](_0x21ce1e,_0x160c37[_0x4a1f48(_0x2c86a5._0x32750e)]))),_0x3e5e2b[_0x4a1f48(0x116)](_0x160c37);});_0x1cd378===_0x2278a6&&(_0x1cd378-=0.000001,_0x2278a6+=0.000001);_0x38ae4b===_0x21ce1e&&(_0x38ae4b-=0.000001,_0x21ce1e+=0.000001);let _0x472a6b=this['options']['rectangle']||{'xmin':_0x1cd378,'xmax':_0x2278a6,'ymin':_0x38ae4b,'ymax':_0x21ce1e};const _0x426779=getMercatorBounds(_0x472a6b),_0x265355=Math[_0x411cb0(0x17d)](_0x426779[_0x411cb0(_0x933bbc._0x59b2c9)]-_0x426779['xmin']),_0x35572b=Math[_0x411cb0(_0x933bbc._0x44524c)](_0x426779['ymax']-_0x426779['ymin']),_0x500b59=Math[_0x411cb0(_0x933bbc._0x4d1426)](_0x265355,_0x35572b),_0x13ae4b=Math['min'](_0x265355,_0x35572b);this['_mBoundsMax']=_0x500b59;let _0x37c926=0x1;if(_0x500b59>this['options']['maxCanvasSize'])_0x37c926=_0x500b59/this['options']['maxCanvasSize'],_0x13ae4b/_0x37c926<this[_0x411cb0(0x100)][_0x411cb0(_0x933bbc._0x2d7bed)]&&(_0x37c926=_0x13ae4b/this['options']['minCanvasSize']);else _0x13ae4b<this['options']['minCanvasSize']&&(_0x37c926=_0x13ae4b/this[_0x411cb0(_0x933bbc._0x115240)]['minCanvasSize'],_0x500b59/_0x37c926>this[_0x411cb0(_0x933bbc._0x115240)]['maxCanvasSize']&&(_0x37c926=_0x500b59/this['options']['maxCanvasSize']));const _0x4db842=this['heatStyle']['radius']*1.5,_0x444dcc=_0x265355/_0x37c926+_0x4db842*0x2,_0x2be3b6=_0x35572b/_0x37c926+_0x4db842*0x2,_0x2ab461=_0x4db842*_0x37c926;_0x426779['xmin']-=_0x2ab461,_0x426779['ymin']-=_0x2ab461,_0x426779['xmax']+=_0x2ab461,_0x426779['ymax']+=_0x2ab461,_0x426779['xmin']=Math['max'](_0x426779['xmin'],-20037508.34),_0x426779['xmax']=Math[_0x411cb0(0x10e)](_0x426779['xmax'],20037508.34),_0x426779[_0x411cb0(_0x933bbc._0x3cb18b)]=Math[_0x411cb0(0x124)](_0x426779['ymin'],-20037508.34),_0x426779['ymax']=Math[_0x411cb0(_0x933bbc._0x53cc96)](_0x426779['ymax'],20037508.34),this['_scale']=_0x37c926,_0x472a6b=geLatLngBounds(_0x426779),this['_rectangle']=Cesium['Rectangle']['fromDegrees'](_0x472a6b['xmin'],_0x472a6b[_0x411cb0(0x15d)],_0x472a6b[_0x411cb0(_0x933bbc._0x3329c6)],_0x472a6b[_0x411cb0(_0x933bbc._0x5c3992)]);let _0x41c078=_0x3e5e2b[0x0]['value']??0x1,_0xa9f7a1=_0x3e5e2b[0x0]['value']??0x0;const _0x1808af=[];_0x3e5e2b[_0x411cb0(0x163)](_0x137074=>{var _0x450415=_0x411cb0;const _0x3d67c3=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x137074[_0x450415(_0x16ec26._0x12295d)],_0x137074[_0x450415(0x16c)]]),_0xa823ee=_0x137074['value']||0x1,_0x46537f=Math['round']((_0x3d67c3[0x0]-_0x426779[_0x450415(_0x16ec26._0x2f0e4e)])/_0x37c926),_0x38d844=Math[_0x450415(_0x16ec26._0x5b5cc5)]((_0x426779[_0x450415(_0x16ec26._0x480fdc)]-_0x3d67c3[0x1])/_0x37c926);_0x41c078=Math['max'](_0x41c078,_0xa823ee),_0xa9f7a1=Math[_0x450415(_0x16ec26._0x105d0b)](_0xa9f7a1,_0xa823ee),_0x1808af['push']({'x':_0x46537f,'y':_0x38d844,'value':_0xa823ee});});const _0x279b19={'min':this['options']['min']??_0xa9f7a1,'max':this['options']['max']??_0x41c078,'data':_0x1808af};this[_0x411cb0(_0x933bbc._0xde4db2)]=_0x279b19;if(!this['_last_mBounds']||_0x426779['xmin']!==this['_last_mBounds'][_0x411cb0(0x159)]||_0x426779['ymin']!==this['_last_mBounds'][_0x411cb0(0x15d)]||_0x426779[_0x411cb0(0x128)]!==this['_last_mBounds']['xmax']||_0x426779['ymax']!==this['_last_mBounds']['ymax']){this['_last_mBounds']=_0x426779,this['_container']['style']['cssText']='width:'+_0x444dcc+'px;height:'+_0x2be3b6+_0x411cb0(0x107);const _0x5c5601={...this[_0x411cb0(0x17b)],'container':this['_container']};!this['_heat']?this['_heat']=heatmap$1[_0x411cb0(_0x933bbc._0x434b19)]['create'](_0x5c5601):this['_heat']['configure'](_0x5c5601);}this['_heat']['setData'](_0x279b19);const _0x47e4e4=mars3d__namespace['DomUtil']['copyCanvas'](this[_0x411cb0(_0x933bbc._0x15a2ce)]['_renderer'][_0x411cb0(0x167)]);return _0x47e4e4;}['_getArcHeatCanvas'](){var _0x3f8526={_0x2ef86e:0x186,_0x55a249:0xf0,_0x405a0b:0x17b},_0x456007=_0x30832f;this['_heat']['configure']({'radius':this[_0x456007(0x17b)]['radius']*this['style']['arcRadiusScale'],'blur':this[_0x456007(0x17b)]['blur']*this[_0x456007(_0x3f8526._0x2ef86e)][_0x456007(_0x3f8526._0x55a249)],'gradient':this[_0x456007(0x17b)]['gradientArc']||{0.25:_0x456007(0x139),0.55:'rgb(140,140,140)',0.85:_0x456007(0xf7),0x1:'rgb(255,255,255)'}});const _0x49d02c=mars3d__namespace['DomUtil']['copyCanvas'](this[_0x456007(0xfa)]['_renderer']['canvas']);return this[_0x456007(0xfa)]['configure'](this['options'][_0x456007(_0x3f8526._0x405a0b)]),_0x49d02c;}['getPointData'](_0x1eb17f){var _0x31138e={_0x575792:0x16c},_0x41ef99=_0x30832f;const _0x249cf3=mars3d__namespace['LngLatPoint']['parse'](_0x1eb17f);if(!_0x249cf3)return{};const _0x2d887b=mars3d__namespace['PointTrans'][_0x41ef99(0x152)]([_0x249cf3['lng'],_0x249cf3[_0x41ef99(_0x31138e._0x575792)]]),_0x484a52=this[_0x41ef99(0x11b)],_0x3750e1=Math['round']((_0x2d887b[0x0]-_0x484a52[_0x41ef99(0x159)])/this['_scale']),_0x568bf4=Math['round']((_0x484a52[_0x41ef99(0x160)]-_0x2d887b[0x1])/this[_0x41ef99(0x143)]),_0x4fb762=this['_heat'][_0x41ef99(0x10a)]({'x':_0x3750e1,'y':_0x568bf4}),_0x39942a=this['_heat']['_renderer'][_0x41ef99(0x132)][_0x41ef99(0x11f)](_0x3750e1-0x1,_0x568bf4-0x1,0x1,0x1)['data'];return{'x':_0x3750e1,'y':_0x568bf4,'value':_0x4fb762,'color':'rgba('+_0x39942a[0x0]+','+_0x39942a[0x1]+','+_0x39942a[0x2]+','+_0x39942a[0x3]+')'};}}mars3d__namespace['LayerUtil'][_0x30832f(0x129)](_0x30832f(0xf6),HeatLayer),mars3d__namespace['layer']['HeatLayer']=HeatLayer,mars3d__namespace['h337']=h337;function getMercatorBounds(_0x274e1d){var _0x344a08={_0x3cb59c:0x125,_0x5177cf:0x159},_0x3c383b=_0x30832f;const _0x569ad7=mars3d__namespace[_0x3c383b(_0x344a08._0x3cb59c)]['lonlat2mercator']([_0x274e1d[_0x3c383b(_0x344a08._0x5177cf)],_0x274e1d['ymin']]),_0x5f1169=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x274e1d['xmax'],_0x274e1d['ymax']]);return{'xmin':_0x569ad7[0x0],'ymin':_0x569ad7[0x1],'xmax':_0x5f1169[0x0],'ymax':_0x5f1169[0x1]};}function geLatLngBounds(_0x412672){var _0x253b32={_0x52154f:0x15d},_0xe7501f=_0x30832f;const _0x317c5e=mars3d__namespace[_0xe7501f(0x125)]['mercator2lonlat']([_0x412672['xmin'],_0x412672[_0xe7501f(_0x253b32._0x52154f)]]),_0x40a76b=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x412672['xmax'],_0x412672['ymax']]);return{'xmin':_0x317c5e[0x0],'ymin':_0x317c5e[0x1],'xmax':_0x40a76b[0x0],'ymax':_0x40a76b[0x1]};}function getVertexShaderSource(_0x5681c6){return'in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20'+_0x5681c6+';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a';}function _0x4ebd(_0x35171e,_0x39b642){var _0x15ca86=_0x15ca();return _0x4ebd=function(_0x4ebda6,_0x43bfdf){_0x4ebda6=_0x4ebda6-0xe9;var _0x1de41b=_0x15ca86[_0x4ebda6];return _0x1de41b;},_0x4ebd(_0x35171e,_0x39b642);}exports[_0x30832f(0x149)]=HeatLayer,Object['defineProperty'](exports,'__esModule',{'value':!![]});function _0x15ca(){var _0x52a75d=['_last_heatData','Util','StencilFunction','lat','defineProperty','_templates','value','StencilOperation','_mountedHook','canvas2d','height','12664njxnOn','2282dBonYb','isArray','cStore','_yField','_min','1266ygOWJv','heatStyle','shadowCtx','abs','yField','_getInternalData','type','97605BeUEqQ','fill','length','_createArcGraphic','setOptions','style','_removedHook','removeGraphic','_rectangle','renderpartial','blur','body','backgroundColor','arcBlurScale','maxCanvasSize','GraphicLayer','show','rgb(0,255,0)','17NxwStd','heat','rgb(216,216,216)','create','createLinearGradient','_heat','arc','undefined','plugins','minOpacity','rectangle','options','string','createElement','defaultMinOpacity','setDataMin','getData','diffHeight','px;','_height','clear','getValueAt','_graphic2','fillRect','MaterialUtil','min','LngLatPoint','default','_config','granularity','shadowCanvas','fromCache','prototype','push','7301866WdTZEy','_xField','setData','_setStyles','_last_mBounds','uniforms','1136496YCuTDY','_coordinator','getImageData','233916upvRvR','createMaterial','12085vdclFV','flyTo','max','PointTrans','_data','BlendingState','xmax','register','image','merge','_clear','addData','defaultMaxOpacity','getContext','_useGradientOpacity','_renderBoundaries','ctx','ImageLayer','toDataURL','_opacity','lng','renderall','valueField','rgb(0,0,0)','keys','cssText','removeData','apply','160hfwhVx','minCanvasSize','_setOptionsHook','emit','Cesium','_scale','_layer','blue','positions','_colorize','_container','HeatLayer','_onExtremaChange','4JWaBmX','Plugin\x20\x27','splitNum','_width','_radi','64698lCXrGi','width','lonlat2mercator','PolyUtil','_palette','_positions','setPositions','_graphic','round','xmin','_updatePositionsHook','_store','extremachange','ymin','setCoordinator','_renderer','ymax','gradient','data','forEach','77GdHAQs','exports','yellow','canvas','_max'];_0x15ca=function(){return _0x52a75d;};return _0x15ca();}
}));
