/**
 * Mars3D平台插件,结合mapv可视化功能插件  mars3d-mapv
 *
 * 版本信息：v3.7.22
 * 编译日期：2024-07-15 11:22:43
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：泉州中科星桥空天技术有限公司 ，2024-07-15
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mapv || require('mapv')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mapv', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-mapv"] = {}, global.mapv, global.mars3d));
})(this, (function (exports, mapv, mars3d) { 
'use strict';const _0x4b82f6=_0x1fe7;(function(_0x4a9a54,_0x5d38b3){const _0x4911f1={_0x1dff9a:0x1fb,_0x586308:0x200,_0x468fc1:0x223,_0x4ff69a:0x214,_0x2e7189:0x251,_0x447f8:0x1f9},_0xae1d5e=_0x1fe7,_0x146b1f=_0x4a9a54();while(!![]){try{const _0x1de500=-parseInt(_0xae1d5e(0x217))/0x1+-parseInt(_0xae1d5e(0x215))/0x2*(parseInt(_0xae1d5e(_0x4911f1._0x1dff9a))/0x3)+-parseInt(_0xae1d5e(_0x4911f1._0x586308))/0x4+parseInt(_0xae1d5e(_0x4911f1._0x468fc1))/0x5*(-parseInt(_0xae1d5e(_0x4911f1._0x4ff69a))/0x6)+-parseInt(_0xae1d5e(0x243))/0x7+parseInt(_0xae1d5e(_0x4911f1._0x2e7189))/0x8*(parseInt(_0xae1d5e(_0x4911f1._0x447f8))/0x9)+parseInt(_0xae1d5e(0x22d))/0xa;if(_0x1de500===_0x5d38b3)break;else _0x146b1f['push'](_0x146b1f['shift']());}catch(_0x4690bb){_0x146b1f['push'](_0x146b1f['shift']());}}}(_0x380d,0x91b80));function _interopNamespace(_0x324ff8){const _0x434b36=_0x1fe7;if(_0x324ff8&&_0x324ff8[_0x434b36(0x221)])return _0x324ff8;var _0x54306c=Object['create'](null);return _0x324ff8&&Object[_0x434b36(0x233)](_0x324ff8)['forEach'](function(_0x19d6ab){if(_0x19d6ab!=='default'){var _0x47c61d=Object['getOwnPropertyDescriptor'](_0x324ff8,_0x19d6ab);Object['defineProperty'](_0x54306c,_0x19d6ab,_0x47c61d['get']?_0x47c61d:{'enumerable':!![],'get':function(){return _0x324ff8[_0x19d6ab];}});}}),_0x54306c['default']=_0x324ff8,_0x54306c;}var mapv__namespace=_interopNamespace(mapv),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x4b82f6(0x203)],baiduMapLayer=mapv__namespace?mapv__namespace['baiduMapLayer']:null,BaseLayer$1=baiduMapLayer?baiduMapLayer[_0x4b82f6(0x239)]:Function;class MapVRenderer extends BaseLayer$1{constructor(_0x1770db,_0x1ac909,_0x323a33,_0x3a22ca){const _0x1e4063={_0x13f264:0x21f,_0x2caf26:0x250},_0x160b53=_0x4b82f6;super(_0x1770db,_0x1ac909,_0x323a33);if(!BaseLayer$1)return;this['map']=_0x1770db,this['scene']=_0x1770db[_0x160b53(_0x1e4063._0x13f264)],this['dataSet']=_0x1ac909,_0x323a33=_0x323a33||{},this[_0x160b53(_0x1e4063._0x2caf26)](_0x323a33),this['argCheck'](_0x323a33),this['initDevicePixelRatio'](),this['canvasLayer']=_0x3a22ca,this['stopAniamation']=!0x1,this['animation']=_0x323a33[_0x160b53(0x206)];}[_0x4b82f6(0x25b)](){this['devicePixelRatio']=window['devicePixelRatio']||0x1;}['addAnimatorEvent'](){}['animatorMovestartEvent'](){const _0x437240=_0x4b82f6,_0x59a5e3=this['options']['animation'];this['isEnabledTime']()&&this['animator']&&(this['steps']['step']=_0x59a5e3['stepsRange'][_0x437240(0x25c)]);}['animatorMoveendEvent'](){const _0x2dc850={_0x23fe66:0x258},_0x40c0dd=_0x4b82f6;this[_0x40c0dd(_0x2dc850._0x23fe66)]()&&this['animator'];}['getContext'](){return this['canvasLayer']['canvas']['getContext'](this['context']);}['init'](_0x3a9465){const _0x11981a={_0x1970ce:0x23f,_0x5109f4:0x229},_0x574def=_0x4b82f6;this['options']=_0x3a9465,this['initDataRange'](_0x3a9465),this['context']=this['options']['context']||'2d',Cesium$1[_0x574def(0x21b)](this['options'][_0x574def(_0x11981a._0x1970ce)])&&this['canvasLayer']&&this['canvasLayer']['setZIndex']&&this['canvasLayer'][_0x574def(_0x11981a._0x5109f4)](this['options']['zIndex']),this['initAnimator']();}[_0x4b82f6(0x20c)](_0x2cfd5f){const _0x498c6e={_0x16db0a:0x201,_0xb22c5:0x232,_0x78995d:0x1f1,_0x14694b:0x211,_0x247d62:0x219,_0x340fc3:0x23b,_0x4530b5:0x21e,_0x4bc269:0x257,_0x5a8e97:0x257,_0x296515:0x259,_0x1be327:0x1ff},_0x11bfdc={_0x4dea5d:0x1fc,_0x1b4760:0x1fc},_0x1e9ba0={_0x274f1a:0x254},_0x482c4f=_0x4b82f6;if(!this[_0x482c4f(0x1f4)]||this['stopAniamation'])return;const _0x27f150=this[_0x482c4f(0x21f)],_0x4708b1=this['options']['animation'],_0x1a4e08=this['getContext']();if(this['isEnabledTime']()){if(void 0x0===_0x2cfd5f)return void this['clear'](_0x1a4e08);this[_0x482c4f(0x209)]==='2d'&&(_0x1a4e08['save'](),_0x1a4e08['globalCompositeOperation']='destination-out',_0x1a4e08['fillStyle']='rgba(0,\x200,\x200,\x20.1)',_0x1a4e08['fillRect'](0x0,0x0,_0x1a4e08['canvas'][_0x482c4f(0x24a)],_0x1a4e08[_0x482c4f(0x242)]['height']),_0x1a4e08['restore']());}else this[_0x482c4f(_0x498c6e._0x16db0a)](_0x1a4e08);if(this[_0x482c4f(0x209)]==='2d')for(const _0x5d2d36 in this['options']){_0x1a4e08[_0x5d2d36]=this['options'][_0x5d2d36];}else _0x1a4e08[_0x482c4f(0x201)](_0x1a4e08[_0x482c4f(0x208)]);const _0x34856f={'transferCoordinate':function(_0x4101b1){const _0x33c236=_0x482c4f,_0x34affd=null;let _0x52aa57=_0x27f150['mapvFixedHeight'];_0x27f150['mapvAutoHeight']&&(_0x52aa57=_0x27f150['getHeight'](Cesium$1['Cartographic'][_0x33c236(_0x1e9ba0._0x274f1a)](_0x4101b1[0x0],_0x4101b1[0x1])));const _0x3fc678=Cesium$1['Cartesian3']['fromDegrees'](_0x4101b1[0x0],_0x4101b1[0x1],_0x52aa57);if(!_0x3fc678)return _0x34affd;const _0x10aa2d=_0x27f150['cartesianToCanvasCoordinates'](_0x3fc678);if(!_0x10aa2d)return _0x34affd;if(_0x27f150['mapvDepthTest']&&_0x27f150[_0x33c236(0x23e)]===Cesium$1['SceneMode'][_0x33c236(0x20f)]){const _0x17dafc=new Cesium$1['EllipsoidalOccluder'](_0x27f150['globe']['ellipsoid'],_0x27f150['camera']['positionWC']),_0x75ebf9=_0x17dafc['isPointVisible'](_0x3fc678);if(!_0x75ebf9)return _0x34affd;}return[_0x10aa2d['x'],_0x10aa2d['y']];}};void 0x0!==_0x2cfd5f&&(_0x34856f['filter']=function(_0x39e381){const _0xe7ba1b=_0x482c4f,_0x2d724f=_0x4708b1[_0xe7ba1b(0x21d)]||0xa;return!!(_0x2cfd5f&&_0x39e381[_0xe7ba1b(_0x11bfdc._0x4dea5d)]>_0x2cfd5f-_0x2d724f&&_0x39e381[_0xe7ba1b(_0x11bfdc._0x1b4760)]<_0x2cfd5f);});let _0x103a96;if(this[_0x482c4f(_0x498c6e._0xb22c5)]['draw']==='cluster'&&(!this[_0x482c4f(_0x498c6e._0xb22c5)][_0x482c4f(_0x498c6e._0x78995d)]||this['options'][_0x482c4f(0x1f1)]>=this['getZoom']())){this['map'][_0x482c4f(0x228)]();const _0x12ecf4=this['getZoom'](),_0x2185a6=this['supercluster']['getClusters']([-0xb4,-0x5a,0xb4,0x5a],_0x12ecf4);this['pointCountMax']=this['supercluster'][_0x482c4f(_0x498c6e._0x14694b)][_0x12ecf4][_0x482c4f(_0x498c6e._0x247d62)],this['pointCountMin']=this['supercluster']['trees'][_0x12ecf4]['min'];let _0x374c2e={},_0x10156e=null,_0x989709=null;this['pointCountMax']===this['pointCountMin']?(_0x10156e=this[_0x482c4f(0x232)]['fillStyle'],_0x989709=this['options']['minSize']||0x8):_0x374c2e=new mapv__namespace[(_0x482c4f(_0x498c6e._0x340fc3))]({'min':this[_0x482c4f(0x1fd)],'max':this['pointCountMax'],'minSize':this['options']['minSize']||0x8,'maxSize':this[_0x482c4f(0x232)]['maxSize']||0x1e,'gradient':this['options']['gradient']});for(let _0x46b112=0x0;_0x46b112<_0x2185a6['length'];_0x46b112++){const _0x12bbb7=_0x2185a6[_0x46b112];_0x12bbb7['properties']&&_0x12bbb7['properties']['cluster_id']?(_0x2185a6[_0x46b112]['size']=_0x989709||_0x374c2e['getSize'](_0x12bbb7[_0x482c4f(_0x498c6e._0x4530b5)][_0x482c4f(_0x498c6e._0x4bc269)]),_0x2185a6[_0x46b112]['fillStyle']=_0x10156e||_0x374c2e['getColor'](_0x12bbb7[_0x482c4f(_0x498c6e._0x4530b5)][_0x482c4f(_0x498c6e._0x5a8e97)])):_0x2185a6[_0x46b112]['size']=this['options']['size'];}this[_0x482c4f(0x234)]['set'](_0x2185a6),_0x103a96=this['clusterDataSet'][_0x482c4f(0x204)](_0x34856f);}else _0x103a96=this['dataSet']['get'](_0x34856f);this['processData'](_0x103a96);this['options']['unit']==='m'&&this['options']['size']&&(this['options'][_0x482c4f(_0x498c6e._0x296515)]=this[_0x482c4f(_0x498c6e._0xb22c5)]['size']);const _0x3be63e=_0x27f150[_0x482c4f(_0x498c6e._0x1be327)](Cesium$1['Cartesian3']['fromDegrees'](0x0,0x0));if(!_0x3be63e)return;this[_0x482c4f(0x1f2)](_0x1a4e08,new mapv__namespace[(_0x482c4f(0x213))](_0x103a96),this['options'],_0x3be63e),this['options']['updateCallback']&&this['options']['updateCallback'](_0x2cfd5f);}['updateData'](_0x2d671d,_0x56094a){const _0x18c6f0={_0x15da67:0x204},_0xc0459=_0x4b82f6;let _0x5cb9c0=_0x2d671d;_0x5cb9c0&&_0x5cb9c0[_0xc0459(_0x18c6f0._0x15da67)]&&(_0x5cb9c0=_0x5cb9c0['get']()),void 0x0!==_0x5cb9c0&&this['dataSet']['set'](_0x5cb9c0),super['update']({'options':_0x56094a});}['addData'](_0x48fd7c,_0x384fa6){const _0x15e514={_0x561d7a:0x204},_0x3ea206=_0x4b82f6;let _0x31c8fe=_0x48fd7c;_0x48fd7c&&_0x48fd7c['get']&&(_0x31c8fe=_0x48fd7c[_0x3ea206(_0x15e514._0x561d7a)]()),this['dataSet']['add'](_0x31c8fe),this['update']({'options':_0x384fa6});}[_0x4b82f6(0x256)](){return this['dataSet'];}[_0x4b82f6(0x207)](_0x210d69){const _0x3984fc={_0x110fa9:0x1f8},_0x2eefb2=_0x4b82f6;if(this['dataSet']){const _0x164b66=this['dataSet'][_0x2eefb2(0x204)]({'filter':function(_0x3bd2a7){const _0x47cdf1=_0x2eefb2;return _0x210d69==null||typeof _0x210d69!==_0x47cdf1(_0x3984fc._0x110fa9)||!_0x210d69(_0x3bd2a7);}});this['dataSet'][_0x2eefb2(0x24e)](_0x164b66),this[_0x2eefb2(0x241)]({'options':null});}}['clearData'](){this['dataSet']&&this['dataSet']['clear'](),this['update']({'options':null});}['draw'](){const _0x510743={_0x4d365e:0x236},_0x299374=_0x4b82f6;this['canvasLayer'][_0x299374(_0x510743._0x4d365e)]();}[_0x4b82f6(0x201)](_0x12fd21){const _0x38b328={_0x4ca07f:0x20a,_0x28caa2:0x25d},_0xe2ac89=_0x4b82f6;_0x12fd21&&_0x12fd21[_0xe2ac89(_0x38b328._0x4ca07f)]&&_0x12fd21['clearRect'](0x0,0x0,_0x12fd21['canvas']['width'],_0x12fd21['canvas'][_0xe2ac89(_0x38b328._0x28caa2)]);}['getZoom'](){const _0x332a12=_0x4b82f6;return this[_0x332a12(0x205)]['level'];}[_0x4b82f6(0x20e)](){const _0x3ae7dc={_0x136545:0x201},_0x373743=_0x4b82f6;this[_0x373743(_0x3ae7dc._0x136545)](this[_0x373743(0x1fa)]()),this['clearData'](),this['animator']&&this[_0x373743(0x21a)][_0x373743(0x247)](),this['animator']=null,this['canvasLayer']=null;}}function _0x1fe7(_0x5edcc1,_0x46fc68){const _0x380dfa=_0x380d();return _0x1fe7=function(_0x1fe7e2,_0xdf5047){_0x1fe7e2=_0x1fe7e2-0x1f1;let _0x17adc1=_0x380dfa[_0x1fe7e2];return _0x17adc1;},_0x1fe7(_0x5edcc1,_0x46fc68);}if(mapv__namespace!==null&&mapv__namespace!==void 0x0&&mapv__namespace['DataSet'])mapv__namespace['DataSet']['prototype'][_0x4b82f6(0x22c)]=function(_0x413159,_0x3840f0,_0x42e813,_0xfe1fd5){const _0x565098={_0x5abe4c:0x255,_0x34c941:0x226},_0x26d58c={_0x17f2f7:0x226},_0x3a1895=_0x4b82f6;_0xfe1fd5=_0xfe1fd5||'_coordinates',_0x42e813=_0x42e813||'coordinates';for(let _0x59d965=0x0;_0x59d965<_0x413159['length'];_0x59d965++){const _0x8a0071=_0x413159[_0x59d965]['geometry'],_0x305244=_0x8a0071[_0x42e813];switch(_0x8a0071[_0x3a1895(_0x565098._0x5abe4c)]){case _0x3a1895(0x240):{const _0x10ee8b=_0x3840f0(_0x305244);_0x10ee8b?_0x8a0071[_0xfe1fd5]=_0x10ee8b:_0x8a0071[_0xfe1fd5]=[-0x3e7,-0x3e7];}break;case'LineString':{const _0x875083=[];for(let _0x539abd=0x0;_0x539abd<_0x305244[_0x3a1895(_0x565098._0x34c941)];_0x539abd++){const _0x518b4e=_0x3840f0(_0x305244[_0x539abd]);_0x518b4e&&_0x875083['push'](_0x518b4e);}_0x8a0071[_0xfe1fd5]=_0x875083;}break;case'MultiLineString':case'Polygon':{const _0x2826bf=_0x3642a0(_0x305244);_0x8a0071[_0xfe1fd5]=_0x2826bf;}break;case'MultiPolygon':{const _0x2ea74a=[];for(let _0x4cb4a1=0x0;_0x4cb4a1<_0x305244['length'];_0x4cb4a1++){const _0x16ef57=_0x3642a0(_0x305244[_0x4cb4a1]);_0x16ef57[_0x3a1895(0x226)]>0x0&&_0x2ea74a['push'](_0x16ef57);}_0x8a0071[_0xfe1fd5]=_0x2ea74a;}break;}}function _0x3642a0(_0x4ee938){const _0x228ca=_0x3a1895,_0x370761=[];for(let _0xfa8664=0x0;_0xfa8664<_0x4ee938[_0x228ca(_0x26d58c._0x17f2f7)];_0xfa8664++){const _0x30e906=_0x4ee938[_0xfa8664],_0x12c560=[];for(let _0x1fe475=0x0;_0x1fe475<_0x30e906['length'];_0x1fe475++){const _0x583c04=_0x3840f0(_0x30e906[_0x1fe475]);_0x583c04&&_0x12c560['push'](_0x583c04);}_0x12c560[_0x228ca(0x226)]>0x0&&_0x370761['push'](_0x12c560);}return _0x370761;}return _0x413159;};else throw new Error('请引入\x20mapv\x20库\x20');const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class MapVLayer extends BaseLayer{constructor(_0xb0fcd9,_0x29e32f){const _0x45db85={_0x33d062:0x242},_0x195648=_0x4b82f6;super(_0xb0fcd9),this['_pointerEvents']=this['options']['pointerEvents'],this['dataSet']=_0x29e32f||new mapv__namespace[(_0x195648(0x213))](_0xb0fcd9['data']),this[_0x195648(_0x45db85._0x33d062)]=null;}get['pointerEvents'](){const _0x11710c=_0x4b82f6;return this[_0x11710c(0x23c)];}set[_0x4b82f6(0x1fe)](_0x183c8e){const _0x3d826e={_0x1de2cb:0x242,_0x3558cf:0x252,_0x3fbf21:0x1fe},_0x6693b2=_0x4b82f6;this['_pointerEvents']=_0x183c8e,this['canvas']&&(_0x183c8e?this[_0x6693b2(_0x3d826e._0x1de2cb)][_0x6693b2(_0x3d826e._0x3558cf)][_0x6693b2(_0x3d826e._0x3fbf21)]=_0x6693b2(0x22a):this['canvas'][_0x6693b2(0x252)]['pointerEvents']='none');}[_0x4b82f6(0x24d)](_0x47dbb5){const _0x3c56f8={_0x4a68b2:0x252},_0x43154f=_0x4b82f6;_0x47dbb5?this['canvas'][_0x43154f(_0x3c56f8._0x4a68b2)]['display']='block':this['canvas']['style']['display']='none';}['_mountedHook'](){const _0x435e76={_0x34b335:0x244,_0x1bca67:0x232,_0x59158f:0x216},_0x3111a9=_0x4b82f6;this[_0x3111a9(_0x435e76._0x34b335)]['scene']['mapvDepthTest']=this[_0x3111a9(_0x435e76._0x1bca67)][_0x3111a9(0x246)]??!![],this['_map']['scene'][_0x3111a9(_0x435e76._0x59158f)]=this['options'][_0x3111a9(0x24f)]??![],this[_0x3111a9(0x244)]['scene']['mapvFixedHeight']=this[_0x3111a9(_0x435e76._0x1bca67)][_0x3111a9(0x20b)]??0x0;}['_addedHook'](){const _0x28f444={_0x147001:0x21c},_0x905e31=_0x4b82f6;this['dataSet']&&(!this[_0x905e31(0x23d)]['_data']||this['dataSet']['_data'][_0x905e31(0x226)]===0x0)&&(this['dataSet']['_data']=[]['concat'](this['dataSet']['_dataCache'])),this[_0x905e31(_0x28f444._0x147001)]=new MapVRenderer(this['_map'],this['dataSet'],this['options'],this),this['initDevicePixelRatio'](),this[_0x905e31(0x242)]=this['_createCanvas'](),this['render']=this['render'][_0x905e31(0x237)](this),this['bindEvent'](),this['_reset']();}[_0x4b82f6(0x238)](){const _0x202495={_0xb437e4:0x21c},_0x59ce7e=_0x4b82f6;this['unbindEvent'](),this[_0x59ce7e(_0x202495._0xb437e4)]&&(this['_mapVRenderer']['destroy'](),this['_mapVRenderer']=null),this['canvas']['parentElement']['removeChild'](this['canvas']);}[_0x4b82f6(0x25b)](){this['devicePixelRatio']=window['devicePixelRatio']||0x1;}['bindEvent'](){const _0x505162={_0x23b85b:0x244,_0x2e6a05:0x220,_0x1ced73:0x1f7,_0x3aea3a:0x23a,_0x387ba5:0x253},_0x1657f6=_0x4b82f6;var _0x5a03e0,_0x1d9388;this[_0x1657f6(_0x505162._0x23b85b)]['on'](mars3d__namespace[_0x1657f6(_0x505162._0x2e6a05)][_0x1657f6(0x249)],this[_0x1657f6(_0x505162._0x1ced73)],this),this[_0x1657f6(0x244)]['on'](mars3d__namespace[_0x1657f6(0x220)][_0x1657f6(_0x505162._0x3aea3a)],this['_onMoveStartEvent'],this),this['_map']['on'](mars3d__namespace['EventType'][_0x1657f6(0x231)],this['_onMoveEndEvent'],this),(_0x5a03e0=this['options'])!==null&&_0x5a03e0!==void 0x0&&(_0x5a03e0=_0x5a03e0[_0x1657f6(0x230)])!==null&&_0x5a03e0!==void 0x0&&_0x5a03e0['click']&&this[_0x1657f6(0x244)]['on'](mars3d__namespace['EventType']['click'],this['_onMapClick'],this),(_0x1d9388=this['options'])!==null&&_0x1d9388!==void 0x0&&(_0x1d9388=_0x1d9388['methods'])!==null&&_0x1d9388!==void 0x0&&_0x1d9388[_0x1657f6(_0x505162._0x387ba5)]&&this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this[_0x1657f6(0x25a)],this);}[_0x4b82f6(0x22b)](){const _0x3eb7bf={_0x36959a:0x244,_0x3b404a:0x1f3,_0x471d86:0x222,_0x4f09f6:0x227,_0x455986:0x230,_0x1fe3e6:0x253},_0x2db793=_0x4b82f6;var _0x2c722a,_0x5966dd;this[_0x2db793(_0x3eb7bf._0x36959a)]['off'](mars3d__namespace['EventType']['mouseDown'],this[_0x2db793(0x1f7)],this),this['_map']['off'](mars3d__namespace['EventType']['cameraMoveStart'],this['_onMoveStartEvent'],this),this[_0x2db793(0x244)]['off'](mars3d__namespace['EventType']['cameraMoveEnd'],this[_0x2db793(_0x3eb7bf._0x3b404a)],this),this['_map'][_0x2db793(0x227)](mars3d__namespace['EventType']['postRender'],this[_0x2db793(_0x3eb7bf._0x471d86)],this),(_0x2c722a=this['options'])!==null&&_0x2c722a!==void 0x0&&(_0x2c722a=_0x2c722a[_0x2db793(0x230)])!==null&&_0x2c722a!==void 0x0&&_0x2c722a['click']&&this['_map'][_0x2db793(_0x3eb7bf._0x4f09f6)](mars3d__namespace['EventType'][_0x2db793(0x202)],this['_onMapClick'],this),(_0x5966dd=this[_0x2db793(0x232)])!==null&&_0x5966dd!==void 0x0&&(_0x5966dd=_0x5966dd[_0x2db793(_0x3eb7bf._0x455986)])!==null&&_0x5966dd!==void 0x0&&_0x5966dd[_0x2db793(_0x3eb7bf._0x1fe3e6)]&&this['_map'][_0x2db793(_0x3eb7bf._0x4f09f6)](mars3d__namespace['EventType']['mouseMove'],this[_0x2db793(0x25a)],this);}['_onMoveStartEvent'](){const _0x2ca42c={_0x350dae:0x1f5,_0x366337:0x220},_0x5d5ee1=_0x4b82f6;this['_mapVRenderer']&&(this['_mapVRenderer'][_0x5d5ee1(_0x2ca42c._0x350dae)](),this[_0x5d5ee1(0x244)]['off'](mars3d__namespace['EventType']['postRender'],this['_reset'],this),this['_map']['on'](mars3d__namespace[_0x5d5ee1(_0x2ca42c._0x366337)]['postRender'],this['_reset'],this));}['_onMoveEndEvent'](){const _0xbc0208={_0x79f055:0x227,_0x18f39b:0x220,_0x4d753e:0x21c},_0x3e8128=_0x4b82f6;this['_mapVRenderer']&&(this['_map'][_0x3e8128(_0xbc0208._0x79f055)](mars3d__namespace[_0x3e8128(_0xbc0208._0x18f39b)]['postRender'],this[_0x3e8128(0x222)],this),this[_0x3e8128(_0xbc0208._0x4d753e)]['animatorMoveendEvent'](),this['_reset']());}['_setOptionsHook'](_0x3b6096,_0x40efec){this['_removedHook'](),this['_addedHook']();}['addData'](_0x48616a){const _0x2ddaf9={_0x55bc64:0x232},_0x10fd94=_0x4b82f6;this[_0x10fd94(0x21c)]&&this['_mapVRenderer']['addData'](_0x48616a,this[_0x10fd94(_0x2ddaf9._0x55bc64)]);}['updateData'](_0x37fe52){const _0x41d81e=_0x4b82f6;this[_0x41d81e(0x21c)]&&this[_0x41d81e(0x21c)]['updateData'](_0x37fe52,this['options']);}[_0x4b82f6(0x256)](){const _0x148b4b={_0x2618e0:0x21c},_0x2dc96f=_0x4b82f6;return this['_mapVRenderer']&&(this[_0x2dc96f(0x23d)]=this[_0x2dc96f(_0x148b4b._0x2618e0)]['getData']()),this['dataSet'];}['removeData'](_0x5b028f){const _0x126204={_0xffa3ad:0x207},_0xa51fd4=_0x4b82f6;this['_mapVRenderer']&&this['_mapVRenderer'][_0xa51fd4(_0x126204._0xffa3ad)](_0x5b028f);}['removeAllData'](){const _0x48020f=_0x4b82f6;this[_0x48020f(0x21c)]&&this['_mapVRenderer']['clearData']();}['_createCanvas'](){const _0x26fb23={_0x232bef:0x244,_0x34acfa:0x24a,_0x14c043:0x244,_0x488d9a:0x242,_0x2dca77:0x25d,_0x4799aa:0x232},_0x4d7100=_0x4b82f6,_0x451a=mars3d__namespace['DomUtil'][_0x4d7100(0x235)]('canvas','mars3d-mapv',this['_map']['container']);_0x451a['id']=this['id'],_0x451a['style']['position']=_0x4d7100(0x24c),_0x451a['style']['top']='0px',_0x451a['style']['left']='0px',_0x451a['width']=parseInt(this[_0x4d7100(_0x26fb23._0x232bef)][_0x4d7100(0x242)]['width']),_0x451a['height']=parseInt(this['_map']['canvas']['height']),_0x451a['style'][_0x4d7100(_0x26fb23._0x34acfa)]=this[_0x4d7100(_0x26fb23._0x14c043)][_0x4d7100(_0x26fb23._0x488d9a)]['style']['width'],_0x451a['style']['height']=this['_map']['canvas']['style'][_0x4d7100(_0x26fb23._0x2dca77)],_0x451a[_0x4d7100(0x252)][_0x4d7100(0x1fe)]=this['_pointerEvents']?_0x4d7100(0x20d):'none',_0x451a['style'][_0x4d7100(0x23f)]=this[_0x4d7100(0x232)]['zIndex']??0x9;if(this['options']['context']==='2d'){const _0x3baff1=this['devicePixelRatio'];_0x451a['getContext'](this[_0x4d7100(_0x26fb23._0x4799aa)][_0x4d7100(0x209)])['scale'](_0x3baff1,_0x3baff1);}return _0x451a;}['_reset'](){this['resize'](),this['render']();}[_0x4b82f6(0x236)](){this['_reset']();}['remove'](){const _0x387678={_0x14bbca:0x242,_0x4d270c:0x24b},_0x1bc8bf=_0x4b82f6;this['_mapVRenderer']&&(this['_mapVRenderer']['destroy'](),this[_0x1bc8bf(0x21c)]=null),this[_0x1bc8bf(_0x387678._0x14bbca)][_0x1bc8bf(_0x387678._0x4d270c)][_0x1bc8bf(0x245)](this['canvas']);}['render'](){this['_mapVRenderer']['_canvasUpdate']();}['resize'](){const _0x35e7a3={_0x32de83:0x242,_0x1656ce:0x252,_0x4b4c52:0x24a,_0x265153:0x25d},_0x536285=_0x4b82f6;if(this['canvas']){const _0x56ceb5=this[_0x536285(_0x35e7a3._0x32de83)];_0x56ceb5['style']['position']='absolute',_0x56ceb5['style']['top']='0px',_0x56ceb5['style']['left']='0px',_0x56ceb5['width']=parseInt(this['_map']['canvas']['width']),_0x56ceb5['height']=parseInt(this['_map']['canvas']['height']),_0x56ceb5[_0x536285(_0x35e7a3._0x1656ce)][_0x536285(_0x35e7a3._0x4b4c52)]=this['_map']['canvas']['style']['width'],_0x56ceb5['style'][_0x536285(_0x35e7a3._0x265153)]=this[_0x536285(0x244)]['canvas']['style'][_0x536285(0x25d)];}}['getRectangle'](_0xa3d2c9){const _0x3d565a={_0x4da9f1:0x23d,_0x452db4:0x248},_0x25879f=_0x4b82f6;if(!this[_0x25879f(_0x3d565a._0x4da9f1)]||!this['dataSet']['_data'])return;const _0x366b9c=mars3d__namespace['Util']['getExtentByGeoJSON']({'type':'FeatureCollection','features':this['dataSet'][_0x25879f(_0x3d565a._0x452db4)]});if(!_0x366b9c)return;return _0xa3d2c9!==null&&_0xa3d2c9!==void 0x0&&_0xa3d2c9['isFormat']?_0x366b9c:Cesium['Rectangle']['fromDegrees'](_0x366b9c[_0x25879f(0x212)],_0x366b9c['ymin'],_0x366b9c['xmax'],_0x366b9c['ymax']);}['_onMapClick'](_0x524745){const _0xda227a=_0x4b82f6;this['_cache_event']=_0x524745,this['_mapVRenderer']&&this['_mapVRenderer'][_0xda227a(0x22f)](_0x524745['windowPosition'],_0x524745);}[_0x4b82f6(0x25a)](_0xa46751){const _0x31bd45=_0x4b82f6;this['_cache_event']=_0xa46751,this['_mapVRenderer']&&this[_0x31bd45(0x21c)][_0x31bd45(0x224)](_0xa46751['windowPosition'],_0xa46751);}['on'](_0x4fcaa7,_0xe696d8,_0x3cf0c8){const _0x5c3f80={_0x3ad77e:0x232,_0x2e2b5d:0x230,_0x5e7075:0x244,_0x48e6b3:0x220,_0x4e68dc:0x1f6,_0x14c1ca:0x210},_0x5bad21=_0x4b82f6;this[_0x5bad21(_0x5c3f80._0x3ad77e)][_0x5bad21(_0x5c3f80._0x2e2b5d)]=this['options']['methods']||{};if(_0x4fcaa7===mars3d__namespace['EventType']['click'])this['options']['methods']['click']=_0x1376c2=>{_0x1376c2&&_0xe696d8['bind'](_0x3cf0c8)({...this['_cache_event'],'layer':this,'data':_0x1376c2});},this[_0x5bad21(_0x5c3f80._0x5e7075)]['on'](mars3d__namespace[_0x5bad21(_0x5c3f80._0x48e6b3)]['click'],this[_0x5bad21(_0x5c3f80._0x4e68dc)],this);else _0x4fcaa7===mars3d__namespace['EventType'][_0x5bad21(_0x5c3f80._0x14c1ca)]&&(this['options']['methods']['mousemove']=_0x347e52=>{_0x347e52&&_0xe696d8['bind'](_0x3cf0c8)({...this['_cache_event'],'layer':this,'data':_0x347e52});},this['_map']['on'](mars3d__namespace['EventType']['mouseMove'],this['_onMapMouseMove'],this));return this;}[_0x4b82f6(0x227)](_0x33769f,_0x4f9e6c){const _0x2dc9c9={_0x3b66e5:0x230,_0xbc99f0:0x232},_0x526788=_0x4b82f6;if(_0x33769f==='click'){var _0x57f124;this[_0x526788(0x244)]['off'](_0x33769f,this['_onMapClick'],this),(_0x57f124=this['options'][_0x526788(_0x2dc9c9._0x3b66e5)])!==null&&_0x57f124!==void 0x0&&_0x57f124['mousemove']&&delete this['options']['methods'][_0x526788(0x202)];}else{if(_0x33769f==='mouseMove'){var _0x2caebe;this['_map'][_0x526788(0x227)](_0x33769f,this[_0x526788(0x25a)],this),(_0x2caebe=this[_0x526788(_0x2dc9c9._0xbc99f0)][_0x526788(0x230)])!==null&&_0x2caebe!==void 0x0&&_0x2caebe[_0x526788(0x253)]&&delete this['options']['methods']['mousemove'];}}return this;}}function _0x380d(){const _0x3e629c=['isEnabledTime','_size','_onMapMouseMove','initDevicePixelRatio','start','height','maxClusterZoom','drawContext','_onMoveEndEvent','canvasLayer','animatorMovestartEvent','_onMapClick','_onMoveStartEvent','function','1035369rwKFht','getContext','28617jRmuJe','time','pointCountMin','pointerEvents','cartesianToCanvasCoordinates','1825944pCsLRM','clear','click','Cesium','get','map','animation','removeData','COLOR_BUFFER_BIT','context','clearRect','fixedHeight','_canvasUpdate','auto','destroy','SCENE3D','mouseMove','trees','xmin','DataSet','24zOgUer','120SjITSS','mapvAutoHeight','294719juadJS','defineProperty','max','animator','defined','_mapVRenderer','trails','properties','scene','EventType','__esModule','_reset','312745tlXPJX','mousemoveEvent','MapVLayer','length','off','getExtent','setZIndex','all','unbindEvent','transferCoordinate','19162160RMGvPz','mapv','clickEvent','methods','cameraMoveEnd','options','keys','clusterDataSet','create','draw','bind','_removedHook','__proto__','cameraMoveStart','utilDataRangeIntensity','_pointerEvents','dataSet','mode','zIndex','Point','update','canvas','635138cRwgCL','_map','removeChild','depthTest','stop','_data','mouseDown','width','parentElement','absolute','_showHook','set','clampToGround','init','24mlyftJ','style','mousemove','fromDegrees','type','getData','point_count'];_0x380d=function(){return _0x3e629c;};return _0x380d();}mars3d__namespace['LayerUtil']['register'](_0x4b82f6(0x22e),MapVLayer),mars3d__namespace['layer']['MapVLayer']=MapVLayer,mars3d__namespace['mapv']=mapv__namespace,exports[_0x4b82f6(0x225)]=MapVLayer,Object[_0x4b82f6(0x233)](mapv)['forEach'](function(_0x59d011){const _0x1bb3b9={_0x59df38:0x218},_0xebba90=_0x4b82f6;if(_0x59d011!=='default'&&!exports['hasOwnProperty'](_0x59d011))Object[_0xebba90(_0x1bb3b9._0x59df38)](exports,_0x59d011,{'enumerable':!![],'get':function(){return mapv[_0x59d011];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
